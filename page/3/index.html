<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title>
    nanhan27's Blog
    
</title>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<link rel="stylesheet" href="/style/style.css">
<script src="/script/jquery.min.js"></script>
<script>
    var CONFIG = {
        title: "nanhan27's Blog",
        author: "nanhan",
        lightbox: true,
        animate: true
    }
</script>



    <link rel="stylesheet" href="/lightbox/css/lightbox.min.css">




    <link rel="stylesheet" href="/syuanpi/syuanpi.min.css">









    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<!--Mathjax-->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    }); 
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';                 
        }       
    });
    </script>
    <script type="text/javascript" async
        src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
</head>
<body>
    <div class="progress">
    <div class="progress-inner"></div>
</div>
    <div class="body">
    <div class="tagcloud" id="tagcloud">
    <div class="tagcloud-inner">
        
    </div>
</div>
    <header class="header" id="header">
    <div class="title syuanpi tvIn">
    <div class="table">
        <div class="connect">
            <div class="connect-inner">
                <span><a href="/">nanhan27's Blog</a></span>
                
            </div>
        </div>
    </div>
</div>
    <nav class="main-nav syuanpi tvIn">
<div class="table">

    <ul class="menu">
        
        
            <li class="menu-item">
                <a href="/">
                    <span>文章</span>
                    
                        <span class="menu-item-label">article</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/archives">
                    <span>目录</span>
                    
                        <span class="menu-item-label">archives</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="javascript:;" id="tags">
                    <span>标签</span>
                    
                        <span class="menu-item-label">tags</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/aboutme">
                    <span>关于</span>
                    
                        <span class="menu-item-label">about</span>
                    
                </a>
            </li>
        
        
    </ul>

</div>
</nav>
<div class="mobile-nav"></div>
</header>
    <div class="container">
        <main class="main" id="main">
            
    

<section class="posts">
    
        
    <article class="post">
        <header class="post-header">
            <div class="post-time syuanpi riseIn-light back-1">
                <span>2017年7月29日</span>
            </div>
            <h1 class="post-title syuanpi riseIn-light back-2">
            
                <a href="/2017/07/29/20170705练习赛/">20170705练习赛</a>
            
            </h1>
            
        </header>
        <div class="post-content syuanpi riseIn-light back-3">
            
                
                    <p>引言：这场比赛做的不好，但这已成为了事实，重要的是找到原因。</p>
<h2 id="A、小鹿回家——COCI2009-2010-Contest-2-D"><a href="#A、小鹿回家——COCI2009-2010-Contest-2-D" class="headerlink" title="A、小鹿回家——COCI2009/2010 Contest#2 D"></a>A、小鹿回家——COCI2009/2010 Contest#2 D</h2><p>关键字：预处理、BFS、二分</p>
<p>【分析】</p>
<p>​    看到最小值最大这么明显的标志，想到二分应该不是问题。按照题意写一个模拟的BFS也不是问题，接下来问题就来了：走到每一个点，我判断是否可行的方式是将它与每一个狼的距离算出来，然后与二分的距离进行比较！一个点与所有狼的最小距离是一定的啊！这完全可以预处理出来！我分析了一下，我当时拿了70分就去看其他人是否也有过70，看他是否A掉了，然后看别人的前后代码的长度。也就是说，我没有去思考自己的代码有什么问题。我没有像正式的考试一样努力，渴望从外界获得帮助。我还没有进入一个正常考生的角色。</p>
<p>​    预处理部分就是将猎人跑一遍BFS就行了。</p>
<p>​    其实我发现，贴代码没什么意思，以后还是写流程吧。</p>
<p>【算法流程】</p>
<p>​    1、将猎人塞入队列中（因为每次只会走一步，所以不用dijkstra的优先队列）</p>
<p>​    2、二分距离</p>
<p>​    3、利用这个距离从起点跑，不满足的点不走，看是否能走到家（注意起点和终点也要判断）</p>
<h2 id="B、序列还原——COCI2009-2010-Contest-2-E"><a href="#B、序列还原——COCI2009-2010-Contest-2-E" class="headerlink" title="B、序列还原——COCI2009/2010 Contest#2 E"></a>B、序列还原——COCI2009/2010 Contest#2 E</h2><p>关键字：dfs、A*剪枝</p>
<p>【分析】</p>
<p>​    首先我们可以知道，在一条链上，如果要将其中的两个点交换顺序，并且保证，两点间的点的顺序不变，我们需要2*len-1次操作，所以，我就根据这个性质谢了状压dp，居然水到了70分。这个性质虽然是正确的，但如果我们并不需要将保持两点间的点的顺序不变呢？所以这样结出来的答案应该是大于等于真正的答案的。</p>
<p>​    正解中，这条性质是作为搜索时的A*剪枝使用的……然后dfs就能过了。</p>
<p>【算法流程】</p>
<p>​    1、用Floyd计算每个点到其他点的最小距离。</p>
<p>​    2、dfs</p>
<p>​    其实就这么简单。</p>
<h2 id="C、纸牌游戏——COCI2009-2010-Contest-2-F"><a href="#C、纸牌游戏——COCI2009-2010-Contest-2-F" class="headerlink" title="C、纸牌游戏——COCI2009/2010 Contest#2 F"></a>C、纸牌游戏——COCI2009/2010 Contest#2 F</h2><p>关键字：后缀数组、分治</p>
<p>【分析】</p>
<p>​    50分是比较好写的，但是，我B本身就不是正解，所以就有奇奇怪怪的情况，调了我很久。（所以说拿了70分到底是亏了还是赚了，谁知道呢）。</p>
<p>​    首先，我们每次取出最小的，如果有相同的，我们就要比较后面的。但是，每次比较最坏情况都需要$O（n^2）$的复杂度，有没有一种方法能够预处理出所有串的字典序大小？</p>
<p>​    这里有一种倍增的做法，它的本质就是分治：先比较前len/2的字典序（先不管到底是怎么处理出来的），如果相同，再比较后len/2。就这样继续分下去。</p>
<p>​    所以有了求字典序的目标，我们就考虑怎样快速求字典序：我们先处理出每一行中，长度为1、2的串的字典序。然后我们对其排序：用前len/2的字典序做第一关键字，后len/2做第二关键字从小到大排序，就好了。其实这里的求法和LCA中fa[i][j]是类似的。</p>
<p>​    由于初始的ai是比较大的，所以这里是可以在离散后可以用基排（基数排序）优化的。</p>
<p>​    然后我们就可以用优先队列模拟整个过程了。</p>
<p>【算法流程】</p>
<p>​    1、用分治的思想倍增处理出每一行、每一个字符串的字典序</p>
<p>​    2、用处理好的字符串的字典序当做比较函数，优先队列模拟整个过程</p>
<h2 id="D、观测星球——COCI2009-2010-Contest-3-F"><a href="#D、观测星球——COCI2009-2010-Contest-3-F" class="headerlink" title="D、观测星球——COCI2009/2010 Contest#3 F"></a>D、观测星球——COCI2009/2010 Contest#3 F</h2><p>关键字：高斯消元、数学</p>
<p>【分析】</p>
<p>​    高斯消元不解释，但是就算敲出高斯消元也不一定能A掉，因为365不是质数，所以它有0个或多个逆元，所以得到的解并不一定满足题意，所以我们拆成5和73分别计算，当两者都满足是就是答案。</p>
<p>​    说说高斯消元吧。其实忘得都差不多了，所以只能去复习一遍。关键我们平时写的都是有小数的，而这里保证是整数，所以推起来比较麻烦。</p>
<p>【算法流程】</p>
<p>​    疯狂的高斯消元</p>

                
            
        
        </div>
        
    </article>
    

    
        
    <article class="post">
        <header class="post-header">
            <div class="post-time syuanpi riseIn-light back-1">
                <span>2017年7月29日</span>
            </div>
            <h1 class="post-title syuanpi riseIn-light back-2">
            
                <a href="/2017/07/29/20170703练习赛/">20170703练习赛</a>
            
            </h1>
            
        </header>
        <div class="post-content syuanpi riseIn-light back-3">
            
                
                    <p>引言：A和B题做的其实比较顺手，C题的二分+dp对现在的我而言还是有一段距离，只能说脑洞还是没有那么大，但经Splft大佬一讲解，发现思路其实是很顺畅的，他说写题目的时候困惑他的只有代码中的小细节。D题让我对关于奇怪的解析式的套路又加深了些，希望下次就可以自己独立来分析这种题目了！</p>
<h2 id="A、电话网络——COCI2009-2010-Contest-3-D"><a href="#A、电话网络——COCI2009-2010-Contest-3-D" class="headerlink" title="A、电话网络——COCI2009/2010 Contest#3 D"></a>A、电话网络——COCI2009/2010 Contest#3 D</h2><p>关键字：”仔细看题目系列“，贪心</p>
<p>【分析】</p>
<p>​    题目不难，关键是比赛的时候看题太慢了，还没有理解好题意，大庆已经A掉了。贪心就可以过了。（关键是我和大庆一起做过一道类似的题目，而我当时完全没想到，也就是说，比赛的时候就算碰到原题，我也不能第一时间A掉，我的做题效果不是很好）</p>
<h2 id="B、洗牌机——COCI2009-2010-Contest-1-E"><a href="#B、洗牌机——COCI2009-2010-Contest-1-E" class="headerlink" title="B、洗牌机——COCI2009/2010 Contest#1 E"></a>B、洗牌机——COCI2009/2010 Contest#1 E</h2><p>关键字：数学，图论</p>
<p>【分析】</p>
<p>​    切入点：每张牌的调换存在周期。</p>
<p>​    因为题目给的是n的某个全排列，那么就比较容易知道每一张牌会在一些”环“中调换，也就是说每张牌都会以某个周期回到原来的位置。那么求出所有周期的最小公倍数就能解决问题了。</p>
<h2 id="C、议会——COCI-2008-2009-Final"><a href="#C、议会——COCI-2008-2009-Final" class="headerlink" title="C、议会——COCI 2008-2009 Final"></a>C、议会——COCI 2008-2009 Final</h2><p>关键字：二分，贪心</p>
<p>【分析】</p>
<p>​    看到题目还是蒙逼，看起来就很难！仔细看了一下，第一个子问题是求可能的最大席位，这当然是票越多越好，所以就把剩下的所有的票给i这个人，然后就直接模拟好了。</p>
<p>​    但是，求可能的最小席位就没有那么简单了。第一，当然还是不给i这个人票，但，剩下的票应该给谁才能让i获得的席位最小呢？</p>
<p>​    （<del>不难看出</del>）这个答案应该是单调的。那么先给它套个二分。</p>
<p>​    若党派i现有票数不超过5%，可以直接淘汰，答案是0。否则进行二分，设二分X，判定是否存在使i最终席位小于等于超过X。那么其他人就要让i这个人拿不到x+1个，这样我们定义dp[q][j]表示在这种情况下某个人q拿j个席位最少需要再给他多少票。然后就可以用背包转移了。不过要注意许多的小细节，比赛时没有调出来，赛后还用了很多时间。</p>
<p>【代码】<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M 105</span></div><div class="line"><span class="keyword">int</span> V[M],dp[<span class="number">2</span>][M*<span class="number">2</span>];</div><div class="line"><span class="keyword">int</span> v,n,m,rest;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">chk</span><span class="params">(<span class="keyword">int</span> &amp;x,<span class="keyword">int</span> y)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(x&gt;y)x=y;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">MAX</span><span class="params">(<span class="keyword">int</span> id)</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> p[M],t[M],stk[M],top=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)p[i]=V[i],t[i]=<span class="number">1</span>;</div><div class="line">    p[id]+=rest;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">        <span class="keyword">if</span>(p[i]*<span class="number">20</span>&gt;=v)stk[top++]=i;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</div><div class="line">        ll son=<span class="number">0</span>,mom=<span class="number">1</span>;</div><div class="line">        <span class="keyword">int</span> q=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;top;j++)&#123;</div><div class="line">            <span class="keyword">int</span> now=stk[j];</div><div class="line">            <span class="keyword">if</span>(<span class="number">1l</span>l*son*t[now]&lt;<span class="number">1l</span>l*mom*p[now])&#123;</div><div class="line">                son=p[now];</div><div class="line">                mom=t[now];</div><div class="line">                q=now;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        t[q]++;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> t[id]<span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">MIN</span><span class="params">(<span class="keyword">int</span> lim,<span class="keyword">int</span> id)</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> lef=m-lim,cur=<span class="number">0</span>;</div><div class="line">    <span class="built_in">memset</span>(dp[cur],<span class="number">63</span>,<span class="keyword">sizeof</span> dp[cur]);</div><div class="line">    dp[cur][<span class="number">0</span>]=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;id;i++)&#123;</div><div class="line">        <span class="built_in">memset</span>(dp[cur^<span class="number">1</span>],<span class="number">63</span>,<span class="keyword">sizeof</span> dp[cur^<span class="number">1</span>]);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++)&#123;</div><div class="line">            ll x=<span class="number">1l</span>l*V[id]*j/(lim+<span class="number">1</span>);</div><div class="line">            <span class="keyword">while</span>(<span class="number">1l</span>l*V[id]*j&gt;<span class="number">1l</span>l*x*(lim+<span class="number">1</span>))++x;<span class="comment">//注意这里是“&lt;”，而不是"&lt;="！</span></div><div class="line">            <span class="keyword">if</span>(x*<span class="number">20</span>&lt;v)x=(v+<span class="number">19</span>)/<span class="number">20</span>;</div><div class="line">            x-=V[i];</div><div class="line">            <span class="keyword">if</span>(x&lt;<span class="number">0</span>)x=<span class="number">0</span>;<span class="comment">//说明i这个人本身的票数就能让id拿不到lim+1的席位。</span></div><div class="line">            <span class="keyword">if</span>(x&gt;rest)<span class="keyword">break</span>;</div><div class="line">            <span class="keyword">if</span>(j&gt;=lef)<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=j;k&lt;=m;k++)chk(dp[cur^<span class="number">1</span>][k],dp[cur][k-j]+(<span class="keyword">int</span>)x);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=m;j++)chk(dp[cur^<span class="number">1</span>][j],dp[cur][j]);</div><div class="line">        cur^=<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=id+<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">        <span class="built_in">memset</span>(dp[cur^<span class="number">1</span>],<span class="number">63</span>,<span class="keyword">sizeof</span> dp[cur^<span class="number">1</span>]);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++)&#123;</div><div class="line">            ll x=<span class="number">1l</span>l*V[id]*j/(lim+<span class="number">1</span>);</div><div class="line">            <span class="keyword">while</span>(<span class="number">1l</span>l*V[id]*j&gt;=<span class="number">1l</span>l*x*(lim+<span class="number">1</span>))++x;</div><div class="line">            <span class="keyword">if</span>(x*<span class="number">20</span>&lt;v)x=(v+<span class="number">19</span>)/<span class="number">20</span>;</div><div class="line">            x-=V[i];</div><div class="line">            <span class="keyword">if</span>(x&lt;<span class="number">0</span>)x=<span class="number">0</span>;</div><div class="line">            <span class="keyword">if</span>(x&gt;rest)<span class="keyword">break</span>;</div><div class="line">            <span class="keyword">if</span>(j&gt;=lef)<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=j;k&lt;=m;k++)chk(dp[cur^<span class="number">1</span>][k],dp[cur][k-j]+(<span class="keyword">int</span>)x);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=m;j++)chk(dp[cur^<span class="number">1</span>][j],dp[cur][j]);</div><div class="line">        cur^=<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=m;i&gt;=<span class="number">0</span>;i--)chk(dp[cur][i],dp[cur][i+<span class="number">1</span>]);</div><div class="line">    <span class="keyword">return</span> dp[cur][lef]&lt;=rest;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;v,&amp;n,&amp;m);</div><div class="line">    rest=v;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;V[i]),rest-=V[i];</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="built_in">printf</span>(<span class="string">"%d "</span>,MAX(i));</div><div class="line">    <span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">        <span class="keyword">if</span>(<span class="number">20l</span>l*V[i]&lt;v)<span class="built_in">printf</span>(<span class="string">"0 "</span>);</div><div class="line">        <span class="keyword">else</span>&#123;</div><div class="line">            <span class="keyword">int</span> L=<span class="number">0</span>,R=m,ans=<span class="number">0</span>;</div><div class="line">            <span class="keyword">while</span>(L&lt;=R)&#123;</div><div class="line">                <span class="keyword">int</span> md=L+R&gt;&gt;<span class="number">1</span>;</div><div class="line">                <span class="keyword">if</span>(MIN(md,i))ans=md,R=md<span class="number">-1</span>;</div><div class="line">                <span class="keyword">else</span> L=md+<span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d "</span>,ans);</div><div class="line">        &#125;</div><div class="line">    &#125;<span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="D、数位相乘——COCI-2007-2008-Final"><a href="#D、数位相乘——COCI-2007-2008-Final" class="headerlink" title="D、数位相乘——COCI 2007/2008 Final"></a>D、数位相乘——COCI 2007/2008 Final</h2><p>关键字：搜索</p>
<p>【分析】</p>
<p>​    首先我们来观察一下$f(x)$这个函数的组成，是一个大数和许多1~9的数的乘积。那个大数不太好下手，那么我们就从那些1~9的数入手。</p>
<p>​    切入点：<strong>从容易的入手。</strong></p>
<p>​    我们可以用dfs暴力枚举每个数出现的次数，算出一个乘积sum，然后题目就转化成在[L/sum,R/sum]中有多少个数满足上述1~9出现的次数。</p>
<p>​    根据求满足[L,R]区间中出现的某些满足条件的数次个数的惯用套路，应该求出[1,R]的和[1,L-1]这两种情况，然后相减。</p>
<p>​    有了这个基本的思路，我们就可以开始模拟了。然而会出现（R/sum）的长度与所选的数字的个数不同的情况。这些情况还是比较好处理的，难处理的是长度与数字的个数不同的情况。</p>
<p>​    <strong>这种情况其实和平常的数位dp的思路差不多。</strong>如果在某一位放的数字小于（R/sum）这位上的数字，那么后面的排列方法可以直接用阶乘算出。如果相同，就递归下去。如果摆出来的数字与（R/sum）完全相同，答案照样加上。</p>
<p>【代码】<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M 20</span></div><div class="line"><span class="keyword">int</span> a[M],cnt[<span class="number">10</span>],c[<span class="number">10</span>];</div><div class="line">ll L,R,res,calares;</div><div class="line">ll p[M],ji[M];</div><div class="line"><span class="keyword">int</span> sz;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">pf</span><span class="params">(ll x)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(x&gt;=<span class="number">10</span>)pf(x/<span class="number">10</span>);</div><div class="line">    <span class="built_in">putchar</span>(x%<span class="number">10</span>^<span class="number">48</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(p&gt;sz)&#123;</div><div class="line">        calares++;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(cnt[a[p]])&#123;</div><div class="line">        cnt[a[p]]--;</div><div class="line">        solve(p+<span class="number">1</span>);</div><div class="line">        cnt[a[p]]++;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;a[p];i++)&#123;</div><div class="line">        <span class="keyword">if</span>(!cnt[i])<span class="keyword">continue</span>;</div><div class="line">        cnt[i]--;</div><div class="line">        ll now=ji[sz-p];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">9</span>;j++)now/=ji[cnt[j]];</div><div class="line">        cnt[i]++;</div><div class="line">        calares+=now;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function">ll <span class="title">cala</span><span class="params">(<span class="keyword">int</span> len,ll num)</span></span>&#123;</div><div class="line">    sz=calares=<span class="number">0</span>;</div><div class="line">    ll q=num;</div><div class="line">    <span class="keyword">while</span>(q)&#123;</div><div class="line">        a[++sz]=q%<span class="number">10</span>;</div><div class="line">        q/=<span class="number">10</span>;</div><div class="line">    &#125;</div><div class="line">    reverse(a+<span class="number">1</span>,a+sz+<span class="number">1</span>);</div><div class="line">    <span class="keyword">if</span>(sz&lt;len)<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(sz&gt;len)&#123;</div><div class="line">        calares=ji[len];</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">9</span>;i++)calares/=ji[cnt[i]];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span>&#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">9</span>;i++)c[i]=cnt[i];</div><div class="line">        solve(<span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> calares;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> cur,<span class="keyword">int</span> len,ll num,<span class="keyword">bool</span> f)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(len&amp;&amp;p[len<span class="number">-1</span>]*num&gt;R||cur&gt;<span class="number">9</span>||len&gt;<span class="number">18</span>)<span class="keyword">return</span>;</div><div class="line">    <span class="keyword">if</span>(f)&#123;</div><div class="line">        ll r=R/num;</div><div class="line">        ll l=(L<span class="number">-1</span>)/num;</div><div class="line">        res+=cala(len,r)-cala(len,l);</div><div class="line">    &#125;</div><div class="line">    cnt[cur]++;</div><div class="line">    dfs(cur,len+<span class="number">1</span>,num*cur,<span class="number">1</span>);</div><div class="line">    cnt[cur]--;</div><div class="line">    dfs(cur+<span class="number">1</span>,len,num,<span class="number">0</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%lld %lld"</span>,&amp;L,&amp;R);</div><div class="line">    p[<span class="number">0</span>]=ji[<span class="number">0</span>]=<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">18</span>;i++)&#123;</div><div class="line">        p[i]=p[i<span class="number">-1</span>]*<span class="number">10</span>;</div><div class="line">        ji[i]=ji[i<span class="number">-1</span>]*i;</div><div class="line">    &#125;</div><div class="line">    dfs(<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>);</div><div class="line">    pf(res);</div><div class="line">    <span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

                
            
        
        </div>
        
    </article>
    

    
        
    <article class="post">
        <header class="post-header">
            <div class="post-time syuanpi riseIn-light back-1">
                <span>2017年7月29日</span>
            </div>
            <h1 class="post-title syuanpi riseIn-light back-2">
            
                <a href="/2017/07/29/20170702练习赛/">20170702练习赛</a>
            
            </h1>
            
        </header>
        <div class="post-content syuanpi riseIn-light back-3">
            
                
                    <p>引言：刚从家里回来就考试，表示十分蒙逼。</p>
<h2 id="A、走廊上的咆哮——COCI-2007-2008-Final"><a href="#A、走廊上的咆哮——COCI-2007-2008-Final" class="headerlink" title="A、走廊上的咆哮——COCI 2007/2008 Final"></a>A、走廊上的咆哮——COCI 2007/2008 Final</h2><p>关键字：二分，贪心</p>
<p>【分析】</p>
<p>​    （<del>其实我刚开始写的时候并没有想到二分，可能是打游戏打傻了</del>）首先我们当然知道时间越多越好，也就是说，答案是单调的，自然就想到了二分。接下来就是现实的问题了，该怎么判。</p>
<p>​    一开始真的没什么思路，而且有好多人已经A掉了，有感觉第一题就不会写，当时就比较慌。有种感觉就是所有人都向中间集合会比较好。但是模拟了下数据好像不太行。最后感觉第一个人先向右，第二个人尽量在可以收到消息的情况下靠右。</p>
<h2 id="B、BGM——COCI-2007-2008-Final"><a href="#B、BGM——COCI-2007-2008-Final" class="headerlink" title="B、BGM——COCI 2007/2008 Final"></a>B、BGM——COCI 2007/2008 Final</h2><p>关键字：dp，贪心</p>
<p>【分析】</p>
<p>​    首先我们知道最后的答案与BGM出现的次数无关。那么这道题其实就是求如何用最少的的点数覆盖所需要的点。</p>
<p>​    我想到的是最左边和最右边的点的最优覆盖方法是能用贪心确定下来的（当以最左边的点为左端点时产生的区间的下一个点，一定处于一个区间的最左或最右），那么所求的区间就可以像这样分成小的区间。于是就有了记忆化搜索的方法：定义dp[i][j]表示[1,i]已经覆盖好，j=0表示i为接下来的区间的左端点，j=1则为右端点，那么最后的答案则为dfs(1,0)。</p>
<p>【代码】<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M 300005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> mem(a,b) memset(a,b,sizeof(a))</span></div><div class="line"><span class="comment">//int tol[M],tor[M];</span></div><div class="line"><span class="keyword">int</span> a[M],to[M];</div><div class="line"><span class="keyword">int</span> dp[M][<span class="number">2</span>];</div><div class="line"><span class="keyword">int</span> n,m,K;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">()</span></span>&#123;</div><div class="line">    mem(dp,<span class="number">-1</span>);</div><div class="line">    mem(to,<span class="number">-1</span>);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=m;i++)&#123;</div><div class="line">        <span class="keyword">if</span>(a[i]&lt;=a[<span class="number">1</span>]+K<span class="number">-1</span>)<span class="keyword">continue</span>;</div><div class="line">        to[<span class="number">1</span>]=i;</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(to[<span class="number">1</span>]==<span class="number">-1</span>)<span class="keyword">return</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=m;i++)&#123;</div><div class="line">        to[i]=to[i<span class="number">-1</span>];</div><div class="line">        <span class="keyword">while</span>(to[i]&lt;=m&amp;&amp;a[to[i]]&lt;=a[i]+K<span class="number">-1</span>)to[i]++;</div><div class="line">        <span class="keyword">if</span>(to[i]==m+<span class="number">1</span>)&#123;</div><div class="line">            to[i]=<span class="number">-1</span>;</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">DP</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">bool</span> f)</span></span>&#123;<span class="comment">//0: 左; 1: 右</span></div><div class="line">    <span class="keyword">int</span> &amp;res=dp[p][f];</div><div class="line">    <span class="keyword">if</span>(~res)<span class="keyword">return</span> res;</div><div class="line">    <span class="keyword">if</span>(f==<span class="number">0</span>)&#123;</div><div class="line">        <span class="keyword">int</span> To=to[p];</div><div class="line">        <span class="keyword">if</span>(To==<span class="number">-1</span>)res=K;</div><div class="line">        <span class="keyword">else</span> res=K+min(DP(To,<span class="number">0</span>),DP(To,<span class="number">1</span>)-(a[p]-a[To]+<span class="number">2</span>*K<span class="number">-1</span>));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span>&#123;</div><div class="line">        <span class="keyword">if</span>(p==m)res=K;</div><div class="line">        <span class="keyword">else</span> res=K+min(DP(p+<span class="number">1</span>,<span class="number">0</span>),DP(p+<span class="number">1</span>,<span class="number">1</span>)-(a[p]-a[p+<span class="number">1</span>]+K));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;K);</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;m);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">    sort(a+<span class="number">1</span>,a+m+<span class="number">1</span>);</div><div class="line">    m=unique(a+<span class="number">1</span>,a+m+<span class="number">1</span>)-a<span class="number">-1</span>;</div><div class="line">    Init();</div><div class="line">    <span class="keyword">int</span> ans=DP(<span class="number">1</span>,<span class="number">0</span>);</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>​    还有一种yahong的做法：定义一个一维的dp数组。dp[i]表示已经覆盖到i的方法。看着这个定义，内心其实是拒绝的，因为定义虽然简单，但是不知道怎么转移。</p>
<p>​    首先最后这些点一定会被分成若干长度大于等于K的块（这就是题目真正让我们做的事）。</p>
<p>​    那么对于一个i，那么它是从一个不在它K的范围中的点转移过来，要么是从一个在它K的范围中的点转移过来。</p>
<p>​    对于前者，我们应该在满足的j中找到$min(dp[j-1]+a[i]-a[j]+1)$，对它进行变形，应该是$a[i]+min(dp[j-1]-a[j]+1)$，所以对于每一个点，我们都存一下后面的那个min（），这样就省去了再用一层for来维护它。</p>
<p>而对于后者，只需要dp[j]+k就行。</p>
<p>【代码】</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M 300005</span></div><div class="line"><span class="keyword">int</span> a[M],dp[M];</div><div class="line"><span class="keyword">int</span> n,k,m,p;</div><div class="line"><span class="keyword">int</span> mn=<span class="number">2e9</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;n,&amp;k,&amp;m);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">    sort(a+<span class="number">1</span>,a+m+<span class="number">1</span>);</div><div class="line">    m=unique(a+<span class="number">1</span>,a+m+<span class="number">1</span>)-a<span class="number">-1</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)&#123;</div><div class="line">        <span class="keyword">while</span>(i!=<span class="number">1</span>&amp;&amp;a[i]-a[p]&gt;=k)mn=min(mn,dp[p<span class="number">-1</span>]-a[p++]+<span class="number">1</span>);</div><div class="line">        dp[i]=min(mn+a[i],dp[p<span class="number">-1</span>]+k);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[m]);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="C、逃离螺旋迷宫——COCI-2007-2008-Final"><a href="#C、逃离螺旋迷宫——COCI-2007-2008-Final" class="headerlink" title="C、逃离螺旋迷宫——COCI 2007/2008 Final"></a>C、逃离螺旋迷宫——COCI 2007/2008 Final</h2><p>关键字：找规律，最短路，缩点</p>
<p>【分析】</p>
<p>​    首先应该可以看得出，这是一道最短路问题。先是建边。（找规律开始了）</p>
<p>​    因为这是一个类似正方形的迷宫，所以我们会注意到平方数会在正方形的拐点，所以任意一个点都能用相邻的两个平方数来表述出来。这样我们就可以找到B对应的A了。</p>
<p>​    难道我们要将小于等于n的点都加入到图里吗，更何况输入还有大于n的点。<strong>实际上，有用的就只有2*m+2个点</strong>。为什么呢？因为其他的点如果有用，一定是那2*m+2个点旋转时才会用到。</p>
<p>​    所以我们要建两种边：2<em>m个点的破墙边和2</em>m+2个点的普通边。</p>
<p>​    边建好了，一发Dijkstra直接就带走。</p>

                
            
        
        </div>
        
    </article>
    

    
        
    <article class="post">
        <header class="post-header">
            <div class="post-time syuanpi riseIn-light back-1">
                <span>2017年7月29日</span>
            </div>
            <h1 class="post-title syuanpi riseIn-light back-2">
            
                <a href="/2017/07/29/20170616个人赛/">20170616个人赛</a>
            
            </h1>
            
        </header>
        <div class="post-content syuanpi riseIn-light back-3">
            
                
                    <p>引言：来了道经典问题，可惜我没看过。来了道Tarjan，可惜我没学过。来了道简单题，可惜我没写出来。啊！</p>
<h2 id="A、棋盘覆盖——经典问题"><a href="#A、棋盘覆盖——经典问题" class="headerlink" title="A、棋盘覆盖——经典问题"></a>A、棋盘覆盖——经典问题</h2><p>关键字：分治</p>
<p>【分析】</p>
<p>​    他们说这道题紫书上有，是分治算法最入门的题目。（<del>然而我当时并没有看到这道题</del>）</p>
<p>​    切入点：因为棋盘的边长是$2^k$，所以是比较容易想到分成$2^（k-1）$递归下去的，这实际上就是分治的思想。</p>
<p>【代码】<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M 505</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> mp[M][M];</div><div class="line"><span class="keyword">int</span> k,x,y;</div><div class="line"><span class="keyword">int</span> tot;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></div><div class="line">    <span class="keyword">int</span> lx,ly,rx,ry;</div><div class="line">    <span class="keyword">int</span> x,y;</div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">chk</span><span class="params">(node a,<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> x&gt;=a.lx&amp;&amp;x&lt;=a.rx&amp;&amp;y&gt;=a.ly&amp;&amp;y&lt;=a.ry;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> lx,<span class="keyword">int</span> ly,<span class="keyword">int</span> rx,<span class="keyword">int</span> ry,<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(lx==rx)<span class="keyword">return</span>;</div><div class="line">    <span class="keyword">int</span> nx=lx+rx+<span class="number">1</span>&gt;&gt;<span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> ny=ly+ry+<span class="number">1</span>&gt;&gt;<span class="number">1</span>;</div><div class="line">    node now[<span class="number">4</span>];</div><div class="line">    now[<span class="number">0</span>]=(node)&#123;lx,ly,nx<span class="number">-1</span>,ny<span class="number">-1</span>,nx<span class="number">-1</span>,ny<span class="number">-1</span>&#125;;</div><div class="line">    now[<span class="number">1</span>]=(node)&#123;lx,ny,nx<span class="number">-1</span>,ry,nx<span class="number">-1</span>,ny&#125;;</div><div class="line">    now[<span class="number">2</span>]=(node)&#123;nx,ly,rx,ny<span class="number">-1</span>,nx,ny<span class="number">-1</span>&#125;;</div><div class="line">    now[<span class="number">3</span>]=(node)&#123;nx,ny,rx,ry,nx,ny&#125;;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</div><div class="line">        <span class="keyword">if</span>(!chk(now[i],x,y))<span class="keyword">continue</span>;</div><div class="line">        now[i].x=x,now[i].y=y;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">4</span>;j++)&#123;</div><div class="line">            <span class="keyword">if</span>(i!=j)mp[now[j].x][now[j].y]=tot;</div><div class="line">        &#125;<span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)dfs(now[i].lx,now[i].ly,now[i].rx,now[i].ry,now[i].x,now[i].y);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;k,&amp;x,&amp;y);</div><div class="line">    dfs(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>&lt;&lt;k,<span class="number">1</span>&lt;&lt;k,x,y);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">1</span>&lt;&lt;k;i++)&#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=<span class="number">1</span>&lt;&lt;k;j++)<span class="built_in">printf</span>(<span class="string">"%d "</span>,mp[i][j]);</div><div class="line">        <span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="B、相互看见——COCI2006-2007-Final"><a href="#B、相互看见——COCI2006-2007-Final" class="headerlink" title="B、相互看见——COCI2006/2007 Final"></a>B、相互看见——COCI2006/2007 Final</h2><p>关键字：单调栈，终态分析</p>
<p>【分析】</p>
<p>​    首先，题目的意思是说，如果两人之间有比他们两人任意一人高的话，他们是不能互相看见的。</p>
<p>​    切入点：<strong>考虑终态</strong>，对于一个人i，他向左看，能够看到的人的身高一定是单调不递减的！这样才能满足条件。</p>
<p>​    考虑构造一个单调递减的栈，从1开始。如果当前元素比栈顶元素高的话，我们就要考虑在弹掉栈中元素的同时更新答案。在维护完栈后，将该元素塞入栈。值得注意的是如果在弹的同时遇到相同高度的元素，因为要弹掉，所以该元素的个数应该++，这样答案才不会出错。</p>
<h2 id="C、一九八四——COCI2006-2007-Final"><a href="#C、一九八四——COCI2006-2007-Final" class="headerlink" title="C、一九八四——COCI2006/2007 Final"></a>C、一九八四——COCI2006/2007 Final</h2><p>关键字：Tarjan，图论。</p>
<p>【分析】</p>
<p>​    注意，这是一个假分析<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">对于树上删点删边求是否联通的问题，比较容易地想到Tarjan算法。</div><div class="line"></div><div class="line">low[x]的意义为：x所有子孙沿返祖边到达的最小dfn值</div><div class="line"></div><div class="line">（一）对于删除边x-y，求a和b是否联通的询问。假设y的深度较小，下面分几种情况讨论：</div><div class="line"></div><div class="line">1  若a和b不在同一棵树上，那么一定不连通</div><div class="line"></div><div class="line">2  若y不是x的父节点，就说明x-y是非树边，那么a和b一定存在树上的路径</div><div class="line"></div><div class="line">3  若a和b都不在x的子树内，那么a和b在树上的路径一定不经过x-y</div><div class="line"></div><div class="line">4  若a和b都在x的子树内，那么a和b在树上的路径也不经过x-y</div><div class="line"></div><div class="line">5  最后就剩下一个在子树内，一个在子树外的情况，判断x的子树是否能不经过x-y到达树外，即判断x的子树是否能通过非树边到达子树外，只需看low[x]是否小于dfn[x]即可</div><div class="line"></div><div class="line">(x子树内的一个点的low值小于dfn[x]就说明该点可以通过非树边到达x子树外的任意点)</div><div class="line"></div><div class="line">（二）对于删除点x的询问：</div><div class="line"></div><div class="line">1  若a和b不在同一棵树上，那么不定不连通</div><div class="line"></div><div class="line">2  若a和b都不在x的子树内，那么a和b在树上的路径一定不经过x</div><div class="line"></div><div class="line">3  若a和b都在x的子树内，如果a和b的lca不是x，那么a到b一定联通</div><div class="line"></div><div class="line">如果lca是x，那么就让a和b都尽量向上走，使得a和b的父亲都为x，这样a和b的low值都会最优，这时再判断a和b的low值是否都小于dfn[x]</div><div class="line"></div><div class="line">4  若a和b一个在x的子树内，一个在子树外，假设a在子树内，就让a向上走，走到x的下面(与上文相同），判断low[a]是否小于dfn[x]</div><div class="line"></div><div class="line">By jiedai</div></pre></td></tr></table></figure></p>
<p>【代码】</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">1e5</span>+<span class="number">5</span>,N=<span class="number">5e5</span>+<span class="number">5</span>,S=<span class="number">17</span>;</div><div class="line"><span class="keyword">int</span> tot,nxt[N&lt;&lt;<span class="number">1</span>],to[N&lt;&lt;<span class="number">1</span>],head[M];</div><div class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>&#123;</div><div class="line">    to[++tot]=b;</div><div class="line">    nxt[tot]=head[a];</div><div class="line">    head[a]=tot;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> n,m,q,deep[M],sz[M],id[M],dfsid,fa[S][M],low[M],tree[M];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> f,<span class="keyword">int</span> c)</span></span>&#123;</div><div class="line">    tree[x]=c;</div><div class="line">    deep[x]=deep[f]+<span class="number">1</span>;</div><div class="line">    sz[x]=<span class="number">1</span>;</div><div class="line">    low[x]=id[x]=++dfsid;</div><div class="line">    fa[<span class="number">0</span>][x]=f;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;S&amp;&amp;fa[i<span class="number">-1</span>][x];i++)fa[i][x]=fa[i<span class="number">-1</span>][fa[i<span class="number">-1</span>][x]];</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=head[x];i;i=nxt[i])&#123;</div><div class="line">        <span class="keyword">int</span> y=to[i];</div><div class="line">        <span class="keyword">if</span>(y==f)<span class="keyword">continue</span>;</div><div class="line">        <span class="keyword">if</span>(id[y]==<span class="number">0</span>)&#123;</div><div class="line">            dfs(y,x,c);</div><div class="line">            sz[x]+=sz[y];</div><div class="line">            low[x]=min(low[x],low[y]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> low[x]=min(low[x],id[y]);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">UP</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> step)</span></span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;S;i++)</div><div class="line">        <span class="keyword">if</span>(step&amp;(<span class="number">1</span>&lt;&lt;i))</div><div class="line">            x=fa[i][x];</div><div class="line">    <span class="keyword">return</span> x;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> id[a]&lt;=id[b]&amp;&amp;id[a]+sz[a]&gt;id[b];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">son</span><span class="params">(<span class="keyword">int</span> &amp;a,<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(check(x,a))</div><div class="line">        a=UP(a,deep[a]-deep[x]<span class="number">-1</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(tree[a]!=tree[b])<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    <span class="keyword">if</span>(deep[x]&lt;deep[y])swap(x,y);<span class="comment">//y为父亲</span></div><div class="line">    <span class="keyword">if</span>(fa[<span class="number">0</span>][x]!=y)<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span>(check(x,a)&amp;check(x,b))<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span>(!check(x,a)&amp;!check(x,b))<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    <span class="keyword">return</span> low[x]&lt;id[x];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(tree[a]!=tree[b]||tree[a]!=tree[x]||x==a||x==b)<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    son(a,x),son(b,x);</div><div class="line">    <span class="keyword">if</span>(fa[<span class="number">0</span>][a]!=x&amp;&amp;fa[<span class="number">0</span>][b]!=x)<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span>(fa[<span class="number">0</span>][a]==x&amp;&amp;fa[<span class="number">0</span>][b]==x)&#123;</div><div class="line">        <span class="keyword">if</span>(a==b)<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">        <span class="keyword">return</span> low[a]&lt;id[x]&amp;&amp;low[b]&lt;id[x];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(fa[<span class="number">0</span>][b]==x)swap(a,b);<span class="comment">//x可以到a</span></div><div class="line">    <span class="keyword">return</span> low[a]&lt;id[x];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> op,a,b,x,y;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</div><div class="line">    <span class="keyword">while</span>(m--)&#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;a,&amp;b);</div><div class="line">        add(a,b),add(b,a);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="keyword">if</span>(id[i]==<span class="number">0</span>)dfs(i,<span class="number">0</span>,i);</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;q);</div><div class="line">    <span class="keyword">while</span>(q--)&#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d%d"</span>,&amp;op,&amp;a,&amp;b,&amp;x);</div><div class="line">        <span class="keyword">if</span>(op==<span class="number">1</span>)&#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;y);</div><div class="line">            <span class="built_in">puts</span>(solve(a,b,x,y)?<span class="string">"yes"</span>:<span class="string">"no"</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> <span class="built_in">puts</span>(solve(a,b,x)?<span class="string">"yes"</span>:<span class="string">"no"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="D、马里奥派对——COCI2006-2007-Final"><a href="#D、马里奥派对——COCI2006-2007-Final" class="headerlink" title="D、马里奥派对——COCI2006/2007 Final"></a>D、马里奥派对——COCI2006/2007 Final</h2><p>关键字：“不会写是我的错系列”</p>
<p>【分析】</p>
<p>​    这道题目比较简单，很容易知道是BFS。但是，会有很多的问题困扰我们：s的范围太大，真的用BFS去跑出所有的点显然不现实。</p>
<p>​    <strong>多问自已几个问题，然后尝试去解决。</strong></p>
<p>​    有了这一个问题，思路应该就很自然的考虑BFS能否只跑一些点，剩下的点直接算出来。那么我们就能注意到x和y的范围其实很小！</p>
<p>​    想到这里，问题其实就解决了一半！</p>
<p>​    只要再进行简单（che dan）的数学推理，就能解决大矩形外面的点的个数了。</p>

                
            
        
        </div>
        
    </article>
    

    
        
    <article class="post">
        <header class="post-header">
            <div class="post-time syuanpi riseIn-light back-1">
                <span>2017年7月29日</span>
            </div>
            <h1 class="post-title syuanpi riseIn-light back-2">
            
                <a href="/2017/07/29/20170612组队赛/">20170612练习赛</a>
            
            </h1>
            
        </header>
        <div class="post-content syuanpi riseIn-light back-3">
            
                
                    <p>引言：</p>
<h2 id="A、清理牛棚——USACO-DEC-2005"><a href="#A、清理牛棚——USACO-DEC-2005" class="headerlink" title="A、清理牛棚——USACO DEC 2005"></a>A、清理牛棚——USACO DEC 2005</h2><p>关键字：dp，树状数组</p>
<p>【分析】</p>
<p>​    简单的dp，用BIT维护，真的不知道我和Shying当时为什么不想写…</p>
<p>【代码】</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) x&amp;-x</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100005</span></div><div class="line"><span class="keyword">int</span> n,s,t;</div><div class="line">ll dp[M];</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></div><div class="line">    <span class="keyword">int</span> l,r,v;</div><div class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> node &amp;a)<span class="keyword">const</span>&#123;</div><div class="line">        <span class="keyword">if</span>(r!=a.r)<span class="keyword">return</span> r&lt;a.r;</div><div class="line">        <span class="keyword">if</span>(l!=a.l)<span class="keyword">return</span> l&lt;a.l;</div><div class="line">        <span class="keyword">return</span> v&lt;a.v;</div><div class="line">    &#125;</div><div class="line">&#125;a[M];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">chk</span><span class="params">(ll &amp;x,ll y)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(y==<span class="number">-1</span>)<span class="keyword">return</span>;</div><div class="line">    <span class="keyword">if</span>(x==<span class="number">-1</span>||x&gt;y)x=y;</div><div class="line">&#125;</div><div class="line"><span class="function">ll <span class="title">Q</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">    ll res=<span class="number">-1</span>;</div><div class="line">    <span class="keyword">while</span>(x&lt;M)&#123;</div><div class="line">        chk(res,dp[x]);</div><div class="line">        x+=lowbit(x);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">U</span><span class="params">(<span class="keyword">int</span> x,ll v)</span></span>&#123;</div><div class="line">    <span class="keyword">while</span>(x)&#123;</div><div class="line">        chk(dp[x],v);</div><div class="line">        x-=lowbit(x);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;n,&amp;s,&amp;t);</div><div class="line">    <span class="built_in">memset</span>(dp,<span class="number">-1</span>,<span class="keyword">sizeof</span>(dp));</div><div class="line">    s++;</div><div class="line">    t++;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;a[i].l,&amp;a[i].r,&amp;a[i].v);</div><div class="line">        a[i].l++;</div><div class="line">        a[i].r++;</div><div class="line">    &#125;</div><div class="line">    sort(a+<span class="number">1</span>,a+n+<span class="number">1</span>);</div><div class="line">    U(s,<span class="number">0</span>);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">        ll pre=Q(a[i].l);</div><div class="line">        <span class="keyword">if</span>(pre==<span class="number">-1</span>)<span class="keyword">continue</span>;</div><div class="line">        U(a[i].r+<span class="number">1</span>,pre+a[i].v);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;Q(t+<span class="number">1</span>)&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="B、人工湖——USACO-JAN-2008"><a href="#B、人工湖——USACO-JAN-2008" class="headerlink" title="B、人工湖——USACO JAN 2008"></a>B、人工湖——USACO JAN 2008</h2><p>关键字：链表，模拟</p>
<p>【分析】</p>
<p>​    比赛的时候先是看错题目，以为sort一波然后用并查集维护一下就OK了，结果就只有7分…</p>
<p>​    仔细看完题目后才发现这道题最难的其实是模拟！真个人都不好了！</p>
<p>【代码】</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> oo 1e9</span></div><div class="line"><span class="keyword">int</span> w[M],h[M];</div><div class="line"><span class="keyword">int</span> l[M],r[M];</div><div class="line"><span class="keyword">int</span> n,p=<span class="number">1</span>;</div><div class="line">ll ans[M];</div><div class="line">ll t;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">cover</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123;</div><div class="line">    l[r[p]]=l[p];</div><div class="line">    r[l[p]]=r[p];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">pf</span><span class="params">(ll x)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(x&gt;=<span class="number">10</span>)pf(x/<span class="number">10</span>);</div><div class="line">    <span class="built_in">putchar</span>(x%<span class="number">10</span>^<span class="number">48</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;<span class="comment">//long long</span></div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;w[i],&amp;h[i]);</div><div class="line">        l[i]=i<span class="number">-1</span>,r[i]=i+<span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span>(h[i]&lt;h[p])p=i;</div><div class="line">    &#125;</div><div class="line">    h[<span class="number">0</span>]=h[n+<span class="number">1</span>]=oo;</div><div class="line"><span class="comment">//  cout&lt;&lt;p&lt;&lt;endl;</span></div><div class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</div><div class="line">        <span class="comment">//此时l[p]和r[p]的高度都大于p </span></div><div class="line">        ans[p]=(t+=w[p]);</div><div class="line">        h[p]++;</div><div class="line">        <span class="keyword">if</span>(l[p]==<span class="number">0</span>&amp;&amp;r[p]==n+<span class="number">1</span>)<span class="keyword">break</span>;</div><div class="line">        <span class="keyword">if</span>(h[l[p]]&lt;h[r[p]])&#123;</div><div class="line">            t+=<span class="number">1l</span>l*(h[l[p]]-h[p])*w[p];</div><div class="line">            w[l[p]]+=w[p];</div><div class="line">            cover(p);</div><div class="line">            p=l[p];</div><div class="line">            <span class="keyword">while</span>(h[l[p]]&lt;h[p])p=l[p];</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            t+=<span class="number">1l</span>l*(h[r[p]]-h[p])*w[p];</div><div class="line">            w[r[p]]+=w[p];</div><div class="line">            cover(p);</div><div class="line">            p=r[p];</div><div class="line">            <span class="keyword">while</span>(h[r[p]]&lt;h[p])p=r[p];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;pf(ans[i]);<span class="built_in">puts</span>(<span class="string">""</span>);&#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="C、还原排列——COCI2012-2013-Contest-2-E"><a href="#C、还原排列——COCI2012-2013-Contest-2-E" class="headerlink" title="C、还原排列——COCI2012/2013 Contest#2 E"></a>C、还原排列——COCI2012/2013 Contest#2 E</h2><p>关键字：二分图</p>
<p>【分析】</p>
<p>​    比赛的时候完全就没有想到二分图匹配。这类题目还是要加强。</p>
<p>​    根据题目给的信息，我们可以知道某些区间中的最大值和最小值，以及某个数会出现的区间范围。</p>
<p>​    题目想让我们做的就是给每一个数字找一个不重复的位子。这就很像二分图匹配了，满足一一对应。</p>
<p>【代码】</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M 205</span></div><div class="line"><span class="keyword">int</span> mn[M],mx[M];</div><div class="line"><span class="keyword">int</span> ans[M],to[M];</div><div class="line"><span class="keyword">int</span> L[M],R[M];</div><div class="line"><span class="keyword">bool</span> mk[M];</div><div class="line"><span class="keyword">int</span> n,m;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=mn[x];i&lt;=mx[x];i++)&#123;</div><div class="line">        <span class="keyword">if</span>(mk[i])<span class="keyword">continue</span>;</div><div class="line">        <span class="keyword">if</span>(x&gt;=L[i]&amp;&amp;x&lt;=R[i])&#123;</div><div class="line">            mk[i]=<span class="number">1</span>;</div><div class="line">            <span class="keyword">if</span>(to[i]==<span class="number">-1</span>||dfs(to[i]))&#123;</div><div class="line">                to[i]=x;</div><div class="line">                <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;m);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">        L[i]=<span class="number">1</span>;</div><div class="line">        mn[i]=<span class="number">1</span>;</div><div class="line">        R[i]=n;</div><div class="line">        mx[i]=n;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">while</span>(m--)&#123;</div><div class="line">        <span class="keyword">int</span> f,x,y,z;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d %d"</span>,&amp;f,&amp;x,&amp;y,&amp;z);</div><div class="line">        <span class="keyword">if</span>(f==<span class="number">1</span>)<span class="keyword">for</span>(<span class="keyword">int</span> i=x;i&lt;=y;i++)mx[i]=min(mx[i],z);</div><div class="line">        <span class="keyword">else</span> <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i&lt;=y;i++)mn[i]=max(mn[i],z);</div><div class="line">        L[z]=max(L[z],x);</div><div class="line">        R[z]=min(R[z],y);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> cnt=<span class="number">0</span>;</div><div class="line">    <span class="built_in">memset</span>(to,<span class="number">-1</span>,<span class="keyword">sizeof</span>(to));</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">        <span class="built_in">memset</span>(mk,<span class="number">0</span>,<span class="keyword">sizeof</span>(mk));</div><div class="line">        <span class="keyword">if</span>(dfs(i))cnt++;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(cnt!=n)<span class="built_in">puts</span>(<span class="string">"-1"</span>);</div><div class="line">    <span class="keyword">else</span>&#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)ans[to[i]]=i;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="built_in">printf</span>(<span class="string">"%d "</span>,ans[i]);</div><div class="line">        <span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

                
            
        
        </div>
        
    </article>
    

    
        
    <article class="post">
        <header class="post-header">
            <div class="post-time syuanpi riseIn-light back-1">
                <span>2017年7月29日</span>
            </div>
            <h1 class="post-title syuanpi riseIn-light back-2">
            
                <a href="/2017/07/29/20170606组队赛/">20170606组队赛</a>
            
            </h1>
            
        </header>
        <div class="post-content syuanpi riseIn-light back-3">
            
                
                    <p>引言：这次再次和Shying组队，也获得了比较好的成绩。首先B题是我A掉的，C题是我提供了较完整的思路，因为Shying之前将暴力敲了出来，我不太想再敲一些奇怪的预处理，于是接下来的代码部分由他完成。最后是由于我的思路还有一些小瑕疵，我们两个调了很久，耽误了后面的时间，这一点怪我。<br>总体来说，这场还是比较开心的。</p>
<h2 id="A、最大公约数-——COCI2011-2012-Contest-2-C"><a href="#A、最大公约数-——COCI2011-2012-Contest-2-C" class="headerlink" title="A、最大公约数+——COCI2011/2012 Contest#2 C"></a>A、最大公约数+——COCI2011/2012 Contest#2 C</h2><p>关键字：数学</p>
<p>【分析】</p>
<p>​    这一题是我的队友Shying写的，所以我也就没什么思考了。<br>简单模拟一下记好了。</p>
<h2 id="B、好伙伴数——COCI2011-2012-Contest-2-D"><a href="#B、好伙伴数——COCI2011-2012-Contest-2-D" class="headerlink" title="B、好伙伴数——COCI2011/2012 Contest#2 D"></a>B、好伙伴数——COCI2011/2012 Contest#2 D</h2><p>关键字：状压dp</p>
<p>【分析】</p>
<p>​    虽然数字的范围很大，但是我们其实只需要一个数数位上0、1……是否出现过。想到这里还不够，因为如果用简单的数组存下来的话，是无法快速算出最后的答案的。</p>
<p>​    切入点：状态的定义方式</p>
<p>​    这里我们可以用状压的思想去存组成这些0123的状态数，最后在统一计算答案。</p>
<p>【代码】</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line">ll sum[<span class="number">1</span>&lt;&lt;<span class="number">15</span>];</div><div class="line">ll ans;</div><div class="line"><span class="keyword">int</span> n;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">        ll x;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%lld"</span>,&amp;x);</div><div class="line">        <span class="keyword">int</span> hav=<span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>(x)&#123;</div><div class="line">            <span class="keyword">int</span> p=x%<span class="number">10</span>;</div><div class="line">            hav|=<span class="number">1</span>&lt;&lt;p;    </div><div class="line">            x/=<span class="number">10</span>;</div><div class="line">        &#125;</div><div class="line">        sum[hav]++;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">1024</span>;i++)&#123;</div><div class="line">        <span class="keyword">if</span>(!sum[i])<span class="keyword">continue</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;<span class="number">1024</span>;j++)&#123;</div><div class="line">            <span class="keyword">if</span>(i==j||!sum[j]||(i&amp;j)==<span class="number">0</span>)<span class="keyword">continue</span>;</div><div class="line">            ans+=<span class="number">1l</span>l*sum[i]*sum[j];</div><div class="line">        &#125;</div><div class="line">        ans+=sum[i]*(sum[i]<span class="number">-1</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,ans/<span class="number">2</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="C、函数返回值——COCI2011-2012-Contest-2-E"><a href="#C、函数返回值——COCI2011-2012-Contest-2-E" class="headerlink" title="C、函数返回值——COCI2011/2012 Contest#2 E"></a>C、函数返回值——COCI2011/2012 Contest#2 E</h2><p>关键字：树形dp</p>
<p>【分析】</p>
<p>​    这道题目真的看起来很奇怪。幸好有chk大神点拨Shying，然后他再来提醒我。</p>
<p>​    首先Xi和Yi最多只有一个字符，说明这一层for的次数只与某一层的循环变量i有关。</p>
<p>​    那么，就能知道这是一个树形的结构——如果这一层Xi或Yi出现了字母Z，那么这一层的父亲就是（Z-‘A’），而且一旦父亲的循环变量i确定，那么这一层循环的次数也就确定了。</p>
<p>​    我就开始想如何树形dp了。</p>
<p>​    首先定义dp[i][j]表示第i层，循环j次的方案数。而这种方法显然是不现实的，因为在dfs中还是需要两层for来枚举这一层循环j次和枚举它可以去的层循环了k次，那么复杂度就很高了。因为最近做过关于容斥的题目，那么我尝试着定义dp[i][j]表示第i层，循环次数小于等于j次的方案数。</p>
<p>​    <strong>容斥原理是个好东西</strong></p>
<p>​    这样一想，就豁然开朗了。</p>
<p>​    只要想清楚当前状态是从哪里转移过来的，那么转移就比较简单了。</p>
<p>【代码】</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> P 1000000007</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> F first</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> S second</span></div><div class="line">pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;pp[<span class="number">27</span>];</div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;v[<span class="number">27</span>];</div><div class="line"><span class="keyword">int</span> C[M],dp[<span class="number">27</span>][M];</div><div class="line"><span class="keyword">int</span> n,ans=<span class="number">1</span>;</div><div class="line"><span class="built_in">string</span> a,b;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">cg</span><span class="params">(<span class="built_in">string</span> s)</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)res=(res&lt;&lt;<span class="number">3</span>)+(res&lt;&lt;<span class="number">1</span>)+(s[i]^<span class="string">'0'</span>);</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> &amp;x,<span class="keyword">int</span> y)</span></span>&#123;</div><div class="line">    x=(x+y)%P;</div><div class="line">    <span class="keyword">if</span>(x&lt;<span class="number">0</span>)x+=P;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">rec</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> up=v[x].size();</div><div class="line">    <span class="keyword">if</span>(up==<span class="number">0</span>)&#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;M;i++)dp[x][i]=i;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;M;j++)C[j]=<span class="number">0</span>,dp[x][j]=<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;up;i++)&#123;</div><div class="line">        <span class="keyword">int</span> to=v[x][i];</div><div class="line">        rec(to);</div><div class="line">        <span class="keyword">int</span> nl=pp[to].F,nr=pp[to].S;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;M;j++)&#123;</div><div class="line">            <span class="keyword">if</span>(nl==<span class="number">-1</span>&amp;&amp;nr&gt;=j)Add(C[j],dp[to][nr]-dp[to][j<span class="number">-1</span>]);</div><div class="line">            <span class="keyword">if</span>(nr==<span class="number">-1</span>&amp;&amp;nl&lt;=j)Add(C[j],dp[to][j]-dp[to][nl<span class="number">-1</span>]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;M;j++)&#123;</div><div class="line">            dp[x][j]=<span class="number">1l</span>l*C[j]*dp[x][j]%P;</div><div class="line">            C[j]=<span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;M;i++)Add(dp[x][i],dp[x][i<span class="number">-1</span>]);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">        <span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b;</div><div class="line">        <span class="keyword">if</span>(a&gt;=<span class="string">"a"</span>&amp;&amp;a&lt;=<span class="string">"z"</span>)&#123;</div><div class="line">            pp[i]=make_pair(<span class="number">-1</span>,cg(b));</div><div class="line">            v[a[<span class="number">0</span>]-<span class="string">'a'</span>+<span class="number">1</span>].push_back(i);</div><div class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(b&gt;=<span class="string">"a"</span>&amp;&amp;b&lt;=<span class="string">"z"</span>)&#123;</div><div class="line">            pp[i]=make_pair(cg(a),<span class="number">-1</span>);</div><div class="line">            v[b[<span class="number">0</span>]-<span class="string">'a'</span>+<span class="number">1</span>].push_back(i);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            pp[i]=make_pair(cg(a),cg(b));</div><div class="line">            v[<span class="number">0</span>].push_back(i);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;v[<span class="number">0</span>].size();i++)&#123;</div><div class="line">        <span class="keyword">int</span> to=v[<span class="number">0</span>][i];</div><div class="line">        rec(to);</div><div class="line">        <span class="keyword">int</span> vl=dp[to][pp[to].S];</div><div class="line">        Add(vl,-dp[to][pp[to].F<span class="number">-1</span>]);</div><div class="line">        ans=<span class="number">1l</span>l*vl*ans%P;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="D、送披萨——COCI2011-2012-Contest-2-F"><a href="#D、送披萨——COCI2011-2012-Contest-2-F" class="headerlink" title="D、送披萨——COCI2011/2012 Contest#2 F"></a>D、送披萨——COCI2011/2012 Contest#2 F</h2><p>关键字：贪心，树状数组</p>
<p>【分析】</p>
<p>​    首先用传说中的<strong>相邻交换算法</strong>来验证看到题目就想到的贪心，结果发现未改动之前的答案其实和T没有关系（只是一部分是所有T的加和），按L从小到大排序最优。</p>
<p>​    比赛的时候想到这一步，就……就结束了。因为C题，我犯了一些奇奇怪怪的错误，导致调了40多分钟。</p>
<p>​    接下来我们考虑修改。</p>
<p>​    切入点：数学推演。</p>
<p>​    先算出原先第i个项目对答案的贡献，然后修改，再算修改后对答案的贡献。</p>
<p>​    思路其实是比较简单的。但，这其中包含了较麻烦的数学推演。比赛的时候我虽然都推出来了，但是真的没有时间了。</p>
<p>​    这当中需要快速算一些东西的前缀和，用树状数组来支持是一个性价比很高的方法。</p>
<p>​    总结一下，这道题就是先将决策量化，然后进行数学公式的推演，从而知道题目的本质。最后将前面所得到的算法用一个适合的数据结构来维护。这就是典型的<strong>算法+数据结构</strong>。这道题目做起来其实是比较舒服和顺畅的，和C题一样的水到渠成。</p>
<p>​    这一道题目CHK大神被小C强制用Splay写。Splay当然也可以，先将i Rotato到顶，将后面的区间全部删掉，在重新加入修改的，再算答案。</p>
<p>【代码】</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) x&amp;-x</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M 200005</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">pf</span><span class="params">(ll x)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(x&lt;<span class="number">0</span>)&#123;</div><div class="line">        <span class="built_in">putchar</span>(<span class="string">'-'</span>);</div><div class="line">        x=-x;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(x&gt;=<span class="number">10</span>)pf(x/<span class="number">10</span>);</div><div class="line">    <span class="built_in">putchar</span>(x%<span class="number">10</span>^<span class="number">48</span>);</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Bit</span>&#123;</span></div><div class="line">    ll num[M];</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">U</span><span class="params">(<span class="keyword">int</span> p,<span class="keyword">int</span> v)</span></span>&#123;</div><div class="line">        <span class="keyword">while</span>(p&lt;M)&#123;</div><div class="line">            num[p]+=v;</div><div class="line">            p+=lowbit(p);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="function">ll <span class="title">Q</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123;</div><div class="line">        ll res=<span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span>(p)&#123;</div><div class="line">            res+=num[p];</div><div class="line">            p-=lowbit(p);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;sum,cnt;</div><div class="line"><span class="keyword">int</span> T[M],L[M],b[M];</div><div class="line">ll ans,res,s;</div><div class="line"><span class="keyword">int</span> n,m;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;m);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;T[i],&amp;L[i]);</div><div class="line">        b[i]=L[i];</div><div class="line">        ans+=T[i];</div><div class="line">        cnt.U(L[i],<span class="number">1</span>);</div><div class="line">        sum.U(L[i],L[i]);</div><div class="line">    &#125;</div><div class="line">    sort(b+<span class="number">1</span>,b+n+<span class="number">1</span>);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)s+=b[i],res+=s;</div><div class="line">    pf(ans-res);<span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">    <span class="keyword">while</span>(m--)&#123;</div><div class="line">        ll p;</div><div class="line">        <span class="keyword">int</span> k,t,l;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;k,&amp;t,&amp;l);</div><div class="line">        p=<span class="number">1l</span>l*(n-cnt.Q(L[k]))*L[k]+sum.Q(L[k]);</div><div class="line">        cnt.U(L[k],<span class="number">-1</span>);</div><div class="line">        cnt.U(l,<span class="number">1</span>);</div><div class="line">        sum.U(L[k],-L[k]);</div><div class="line">        sum.U(l,l);</div><div class="line">        res+=<span class="number">1l</span>l*(n-cnt.Q(l))*l+sum.Q(l)-p;</div><div class="line">        ans+=t-T[k];</div><div class="line">        T[k]=t,L[k]=l;</div><div class="line">        pf(ans-res);<span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">    &#125;s</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

                
            
        
        </div>
        
    </article>
    

    
        
    <article class="post">
        <header class="post-header">
            <div class="post-time syuanpi riseIn-light back-1">
                <span>2017年7月29日</span>
            </div>
            <h1 class="post-title syuanpi riseIn-light back-2">
            
                <a href="/2017/07/29/20170605训练赛/">20170605训练赛</a>
            
            </h1>
            
        </header>
        <div class="post-content syuanpi riseIn-light back-3">
            
                
                    <p>引言：这场比赛总体做的还是比较好的。A、B、D题一A，C题没有过掉说明我在分析数据上的能力还有所欠缺，而现在的NOIP很注重这方面的能力。</p>
<h3 id="A、-数学课上的报酬——COCI2011-2012-Contest-4-C"><a href="#A、-数学课上的报酬——COCI2011-2012-Contest-4-C" class="headerlink" title="A、 数学课上的报酬——COCI2011/2012 Contest#4 C"></a>A、 数学课上的报酬——COCI2011/2012 Contest#4 C</h3><p>关键字：决策贪心</p>
<p>【分析】</p>
<p>​    这道题的解法多样，有暴力模拟，前缀和，线段树和单调栈。</p>
<p>​    而我自己先写的是前缀和，即记录$sum[10][M]$，我们先从$[1,k+1]$中寻找一个最大的，位置为i，然后删去$[1,i-1]$，k-=（i-1）。接下来就在$[i+1,i+1+k-1]$中一直操作下去。这种算法的复杂度是$O(10n)$。</p>
<p>​    后来又写了一种单调栈的写法。</p>
<p>​    切入点：我们每一次所做的决策，其实就是如果k还存在，那么判这个数是否要保留的依据就是，它是否比后一个数要大。这样才能保证答案最大。</p>
<p><strong>深入考虑，看清本质，寻找答案。</strong></p>
<h2 id="B、栅栏——COCI2011-2012-Contest-4-D"><a href="#B、栅栏——COCI2011-2012-Contest-4-D" class="headerlink" title="B、栅栏——COCI2011/2012 Contest#4 D"></a>B、栅栏——COCI2011/2012 Contest#4 D</h2><p>关键字：贪心，终态分析</p>
<p>【分析】</p>
<p>​    题目比较好理解。看得出，输入的第一个数组a的作用只是显示相对大小的。</p>
<p>​    切入点：我们先考虑一下最后的答案是怎么组成的。</p>
<p>​    如果一个数x要小于左右两个数，那么ans应该$ans-=2*x$，我们既然要答案最大，那么x应该尽量的小。</p>
<p>​    如果一个数x要大于左右两个数，那么ans应该$ans+=2*x$，我们既然要答案最大，那么x应该尽量的大。</p>
<p>​    那么我们就先让b数组从小到大插入，先处理都小于的情况，在处理一大一小的情况，最后处理均大于的情况。</p>
<p>​    其实我们可以用一个数组s来存该位置的大小情况，-1表示小于。那么最后只需要将s进行排序处理就好了。</p>
<p>​    这道题给我一些启示，贪心并不是所谓的灵光一现才能想出来的，前提是你要清楚每一次选择到底会对答案有怎样的贡献，如果发现了规律，那么<strong>贪心</strong>也就不是贪心了，而是基于规律上的模拟。所以，想事情要向本质探索，而不能流于题目给的字面意思。</p>
<p>【代码】</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> db double</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M 300005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> oo 1e9</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">pf</span><span class="params">(ll x)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(x&lt;<span class="number">0</span>)&#123;</div><div class="line">        <span class="built_in">putchar</span>(<span class="string">'-'</span>);</div><div class="line">        x=-x;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(x&gt;=<span class="number">10</span>)pf(x/<span class="number">10</span>);</div><div class="line">    <span class="built_in">putchar</span>(x%<span class="number">10</span>^<span class="number">48</span>);</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> a[M],b[M],s[M];</div><div class="line"><span class="keyword">int</span> n,p;</div><div class="line">ll ans;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);<span class="comment">//各不相等 </span></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;b[i]);</div><div class="line">    sort(b+<span class="number">1</span>,b+n+<span class="number">1</span>);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">        <span class="keyword">if</span>(i&gt;<span class="number">1</span>)&#123;</div><div class="line">            <span class="keyword">if</span>(a[i]&gt;a[i<span class="number">-1</span>])s[i]++;</div><div class="line">            <span class="keyword">else</span> s[i]--;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(i&lt;n)&#123;</div><div class="line">            <span class="keyword">if</span>(a[i]&gt;a[i+<span class="number">1</span>])++s[i];</div><div class="line">            <span class="keyword">else</span> s[i]--;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    sort(s+<span class="number">1</span>,s+n+<span class="number">1</span>);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)ans+=<span class="number">1l</span>l*s[i]*b[++p];</div><div class="line">    pf(ans);</div><div class="line">    <span class="built_in">puts</span>(<span class="string">""</span>);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="C、暴力的数论——COCI2011-2012-Contest-4-E"><a href="#C、暴力的数论——COCI2011-2012-Contest-4-E" class="headerlink" title="C、暴力的数论——COCI2011/2012 Contest#4 E"></a>C、暴力的数论——COCI2011/2012 Contest#4 E</h2><p>关键字：数论，容斥，筛法，“分块”</p>
<p>【分析】</p>
<p>​    赛场上我对这题的思路比较混乱。先是找了波规律，接着开始水分。看到chk把它A了之后才开始认真地思考问题。</p>
<p>​    接下来讲讲正解的做法和我的一些体会。</p>
<p>​    首先题目K和P的范围都是$[1,10^9]$。这就感觉很吓人。</p>
<p>​    我们先设最后的答案是X，X的范围也是$[1,10^9]$。X=a*p。a为一个不包含小于p的质数的数。</p>
<p>​    切入点：<strong>从简单入手</strong></p>
<p>​    如果我们能够关注一下P，就会发现，如果P很大，那么a就会比较小。那我们其实可以直接枚举这个a。</p>
<p>​    但是P如果比较小的话，就比较麻烦。</p>
<p>​    我们仍是枚举a，不过这次是二分地去枚举a，然后计算出<strong>比a小的不包含比p小的素因子的正整数个数</strong>，与K进行比较来缩小范围。直接求可能比较麻烦， 我们反过来求包含比p小的素因子的个数,而这可以用容斥原理计算。</p>
<p>​    我们该怎样来判断P是大是小呢？题解里说小于50的P算小。这样算的话，P比较小的情况下，素数的个数小于等于15，然后，就可以用状压来求容斥了。而且在P较大时，a也就小于等于$2*10^7$，时间上也能接受。</p>
<p>​    在比赛后小C就讲解了题目，但是从一开始，我就知道我的75分和正解没半毛钱关系。我根本就没有考虑过要对P进行讨论。我连这道题的边都没没有摸到，更别说后面的二分啊，容斥之类的。这种“分块”决策是我所没有掌握的。</p>
<p>​    还有这道题的容斥的思想，应该说是比较常见的，应该要有这种正难则反的思想。但至于如何在考虑题目的时候去考虑它，仍需要将来的努力。</p>
<p>【代码】</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> oo 1e9</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> C 50</span></div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=oo/C;</div><div class="line"><span class="keyword">bool</span> mk[M];</div><div class="line"><span class="keyword">int</span> n,p,sz;</div><div class="line"><span class="keyword">int</span> pri[C];</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">large</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(n==<span class="number">1</span>)<span class="keyword">return</span> p;</div><div class="line">    <span class="keyword">int</span> lim=oo/p,cnt=<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=lim;i++)&#123;</div><div class="line">        <span class="keyword">if</span>(!mk[i])&#123;</div><div class="line">            <span class="keyword">if</span>(i&lt;p)<span class="keyword">for</span>(<span class="keyword">int</span> j=i*i;j&lt;=lim;j+=i)mk[j]=<span class="number">1</span>;</div><div class="line">            <span class="keyword">else</span>&#123;</div><div class="line">                cnt++;</div><div class="line">                <span class="keyword">if</span>(cnt==n)<span class="keyword">return</span> i*p;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=p;i++)&#123;</div><div class="line">        <span class="keyword">if</span>(mk[i])<span class="keyword">continue</span>;</div><div class="line">        pri[sz++]=i;<span class="comment">//sz小于等于15 </span></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>*i;j&lt;=p;j+=i)mk[j]=<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">work</span><span class="params">(<span class="keyword">int</span> R)</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> res=R;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;<span class="number">1</span>&lt;&lt;(sz<span class="number">-1</span>);j++)&#123;</div><div class="line">        <span class="keyword">int</span> num=<span class="number">1</span>,f=<span class="number">-1</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;sz;i++)&#123;</div><div class="line">            <span class="keyword">if</span>(j&amp;(<span class="number">1</span>&lt;&lt;i))&#123;</div><div class="line">                num*=pri[i];</div><div class="line">                <span class="keyword">if</span>(num&gt;R)<span class="keyword">break</span>;</div><div class="line">                f*=<span class="number">-1</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        res-=f*R/num;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">small</span><span class="params">()</span></span>&#123;</div><div class="line">    Init();</div><div class="line">    <span class="keyword">bool</span> ok=<span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> l=<span class="number">1</span>,r=oo/p,res;</div><div class="line">    <span class="keyword">while</span>(l&lt;=r)&#123;</div><div class="line">        <span class="keyword">int</span> md=l+r&gt;&gt;<span class="number">1</span>;</div><div class="line">        <span class="keyword">int</span> an=work(md);</div><div class="line">        <span class="keyword">if</span>(an==n)ok=<span class="number">1</span>,res=md,r=md<span class="number">-1</span>;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(an&lt;n)l=md+<span class="number">1</span>;</div><div class="line">        <span class="keyword">else</span> r=md<span class="number">-1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(!ok)<span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    <span class="keyword">return</span> p*res;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;p);</div><div class="line">    <span class="keyword">if</span>(p==<span class="number">1</span>)&#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,n);</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(p&gt;=<span class="number">50</span>)<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,large());</div><div class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,small());</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="D、破解密文——COCI2011-2012-Contest-4-F"><a href="#D、破解密文——COCI2011-2012-Contest-4-F" class="headerlink" title="D、破解密文——COCI2011/2012 Contest#4 F"></a>D、破解密文——COCI2011/2012 Contest#4 F</h2><p>关键字：字符串、KMP</p>
<p>【分析】</p>
<p>​    这是我第二次敲KMP，A了这道题顿时感觉上天了。（<del>虽然比较简单</del>）</p>
<p>​    首先题目不太好理解，我看了五遍。</p>
<p>​    然后KMP不解释（<del>因为前一天我们刚学了KMP</del>）。问题就是怎么判。小C说我们要解决的不是一个整体的大的问题。如果母串s1的一部分和子串s2相同，那么对于接下来的一个单词，判断它们相同的条件其实只是判这个单词在之前出现的位置是相同的。</p>
<p>​    有了这个判断的方法，接下来就直接套KMP的标准模板就好了。</p>
<p>​    我们要处理的从来就不是一个整体的问题，而是一个又一个连续的问题，所以我们在考虑问题的时候，当然不能整体化地考虑，在上一步的基础上，去考虑这步该怎么走。</p>
<p>【代码】</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M 1000005</span></div><div class="line"><span class="keyword">int</span> a[M],b[M],fail[M];</div><div class="line"><span class="built_in">map</span>&lt;<span class="built_in">string</span>,<span class="keyword">int</span>&gt;mp;</div><div class="line"><span class="keyword">char</span> str[M];</div><div class="line"><span class="keyword">int</span> n,m,ans;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>,str);</div><div class="line">        <span class="keyword">if</span>(str[<span class="number">0</span>]==<span class="string">'$'</span>)<span class="keyword">break</span>;</div><div class="line">        n++;</div><div class="line">        <span class="keyword">if</span>(mp.find(str)==mp.end())a[n]=<span class="number">0</span>;</div><div class="line">        <span class="keyword">else</span> a[n]=mp[str];</div><div class="line">        mp[str]=n;</div><div class="line">    &#125;</div><div class="line">     </div><div class="line">    mp.clear();</div><div class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>,str);</div><div class="line">        <span class="keyword">if</span>(str[<span class="number">0</span>]==<span class="string">'$'</span>)<span class="keyword">break</span>;</div><div class="line">        m++;</div><div class="line">        <span class="keyword">if</span>(mp.find(str)==mp.end())b[m]=<span class="number">0</span>;</div><div class="line">        <span class="keyword">else</span> b[m]=mp[str];</div><div class="line">        mp[str]=m;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">chk</span><span class="params">(<span class="keyword">int</span> *a,<span class="keyword">int</span> *b,<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(i-a[i]&gt;j)<span class="keyword">return</span> b[j]==<span class="number">0</span>;</div><div class="line">    <span class="keyword">return</span> i-a[i]==j-b[j];</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fail</span><span class="params">()</span></span>&#123;</div><div class="line">    fail[<span class="number">1</span>]=<span class="number">0</span>;</div><div class="line">    fail[<span class="number">2</span>]=<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>,j;i&lt;=m;i++)&#123;</div><div class="line">        j=fail[i];</div><div class="line">        <span class="keyword">while</span>(j&amp;&amp;!chk(b,b,i,j))j=fail[j];</div><div class="line">        fail[i+<span class="number">1</span>]=j+<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">KMP</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,j=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">        <span class="keyword">while</span>(j&amp;&amp;!chk(a,b,i,j))j=fail[j];</div><div class="line">        j++;</div><div class="line">        <span class="keyword">if</span>(j==m+<span class="number">1</span>)&#123;</div><div class="line">            ans=i-m+<span class="number">1</span>;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    Init();</div><div class="line">    Fail();</div><div class="line">    KMP();</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

                
            
        
        </div>
        
    </article>
    

    
        
    <article class="post">
        <header class="post-header">
            <div class="post-time syuanpi riseIn-light back-1">
                <span>2017年7月29日</span>
            </div>
            <h1 class="post-title syuanpi riseIn-light back-2">
            
                <a href="/2017/07/29/2017 Multi-University Training Contest 1/">2017 Multi-University Training Contest 1</a>
            
            </h1>
            
        </header>
        <div class="post-content syuanpi riseIn-light back-3">
            
                
                    <h2 id="1002、Balala-Power"><a href="#1002、Balala-Power" class="headerlink" title="1002、Balala Power!"></a>1002、Balala Power!</h2><p>【分析】</p>
<p>​    这道题就是让我们求如何安排字母对应的数字，使得各字符串的权值和最大。</p>
<p>​    我们先来观察一下最后的答案的组成：x个a，y各b……但是我们如果让每个字符串按权展开的话，要用到高精加，很慢。</p>
<p>​    想了一会儿，发现如果最后的答案仍然是用26进制表示的话，我们从高位看起，一定是此时个数最多的相应的数字越大。就和两个数字比较大小是一样的道理。那么我们就先将字符串相加，然后进位，然后从高位看起。</p>
<p>​    不过要考虑”0”的情况！</p>
<p>【代码】<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">100505</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> PP=(<span class="keyword">int</span>)<span class="number">1e9</span>+<span class="number">7</span>;</div><div class="line"><span class="keyword">int</span> n,mxlen;</div><div class="line"><span class="keyword">int</span> cnt[M][<span class="number">30</span>],Ans[<span class="number">30</span>],P[<span class="number">30</span>];</div><div class="line"><span class="keyword">char</span> str[M];</div><div class="line"><span class="keyword">bool</span> mark[<span class="number">30</span>],mark0[<span class="number">30</span>];</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=mxlen<span class="number">-1</span>;i&gt;=<span class="number">1</span>;i--)&#123;</div><div class="line">        <span class="keyword">if</span>(cnt[i][a]&lt;cnt[i][b])<span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">        <span class="keyword">if</span>(cnt[i][a]&gt;cnt[i][b])<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</div><div class="line">    mxlen=<span class="number">0</span>;</div><div class="line">    <span class="built_in">memset</span>(mark,<span class="number">0</span>,<span class="keyword">sizeof</span>(mark));</div><div class="line">    <span class="built_in">memset</span>(mark0,<span class="number">0</span>,<span class="keyword">sizeof</span>(mark0));</div><div class="line">    <span class="built_in">memset</span>(cnt,<span class="number">0</span>,<span class="keyword">sizeof</span>(cnt));</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>,str+<span class="number">1</span>);</div><div class="line">        <span class="keyword">int</span> len=<span class="built_in">strlen</span>(str+<span class="number">1</span>);</div><div class="line">        mxlen=max(mxlen,len);</div><div class="line">        <span class="keyword">if</span>(len&gt;<span class="number">1</span>)mark0[str[<span class="number">1</span>]-<span class="string">'a'</span>]=<span class="literal">true</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=len;j++)</div><div class="line">            mark[str[j]-<span class="string">'a'</span>]=<span class="literal">true</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=len;j&gt;=<span class="number">1</span>;j--)</div><div class="line">            cnt[len-j+<span class="number">1</span>][str[j]-<span class="string">'a'</span>]++;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=mxlen;i++)</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">26</span>;j++)&#123;</div><div class="line">            <span class="keyword">if</span>(cnt[i][j]&gt;=<span class="number">26</span>)&#123;</div><div class="line">                cnt[i+<span class="number">1</span>][j]+=cnt[i][j]/<span class="number">26</span>;</div><div class="line">                cnt[i][j]%=<span class="number">26</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    <span class="keyword">int</span> f=<span class="literal">true</span>;</div><div class="line">    mxlen++;</div><div class="line">    <span class="keyword">while</span>(f)&#123;</div><div class="line">        f=<span class="literal">false</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++)</div><div class="line">            <span class="keyword">if</span>(cnt[mxlen][i])f=<span class="literal">true</span>;</div><div class="line">        <span class="keyword">if</span>(!f)<span class="keyword">break</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++)</div><div class="line">            <span class="keyword">if</span>(cnt[mxlen][i]&gt;=<span class="number">26</span>)&#123;</div><div class="line">                cnt[mxlen+<span class="number">1</span>][i]+=cnt[mxlen][i]/<span class="number">26</span>;</div><div class="line">                cnt[mxlen][i]%=<span class="number">26</span>;</div><div class="line">            &#125;</div><div class="line">        mxlen++;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> cntal=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++)</div><div class="line">        <span class="keyword">if</span>(mark[i])cntal++;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++)P[i]=i;</div><div class="line">    sort(P,P+<span class="number">26</span>,cmp);</div><div class="line">    <span class="keyword">if</span>(cntal&lt;<span class="number">26</span>)&#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">25</span>;i&gt;=<span class="number">0</span>;i--)</div><div class="line">            Ans[P[i]]=i;</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        <span class="keyword">int</span> ans=<span class="number">25</span>,pos;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">26</span>;i++)</div><div class="line">            <span class="keyword">if</span>(!mark0[P[i]])&#123;</div><div class="line">                Ans[P[i]]=<span class="number">0</span>,pos=P[i];</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">25</span>;i&gt;=<span class="number">0</span>;i--)&#123;</div><div class="line">            <span class="keyword">if</span>(P[i]==pos)<span class="keyword">continue</span>;</div><div class="line">            Ans[P[i]]=ans;</div><div class="line">            ans--;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> ANS=<span class="number">0</span>,Bs=<span class="number">1</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;mxlen;i++)&#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">26</span>;j++)</div><div class="line">            ANS=(ANS+(ll)Bs*cnt[i][j]%PP*Ans[j]%PP)%PP;</div><div class="line">        Bs=(ll)<span class="number">26</span>*Bs%PP;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> ANS;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> cas=<span class="number">0</span>;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n)==<span class="number">1</span>)&#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: %d\n"</span>,++cas,solve());</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="1003、Colorful-Tree"><a href="#1003、Colorful-Tree" class="headerlink" title="1003、Colorful Tree"></a>1003、Colorful Tree</h2><p>关键字：线段树、图论、dfs序</p>
<p>【分析】</p>
<p>​    如果不考虑颜色的话，这当然就是一道水题。</p>
<p>​    因为在一条路径上相同的颜色只能算一次，所以yahong的做法就是算完这个点后将这个点删掉（这样和删除子树其实是一样的），使这棵树不再连同，那么，另一个点计算时也就不会重复算了。</p>
<p>​    那么关键就是如何动态地统计某个点的子树的大小。</p>
<p>​    我们考虑同种颜色，可以按后续遍历的顺序来处理。那么这时将一个点删去时，就可以直接删去整个子树。</p>
<p>​    可以利用dfs序和线段树来解决。删除子树时，可以在线段树上将对应区间赋值为0；询问子树大小时，可以在线段树上查询对应区间。</p>
<p>​    当然，对于每种颜色，都要先将线段树还原。</p>
<p>​    <strong>会重复就删掉，这和虚树的想法是类似的。</strong></p>
<p>【代码】</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(x) cout&lt;&lt;#x&lt;&lt;<span class="meta-string">" = "</span>&lt;&lt;x&lt;&lt;endl;</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> rs p&lt;&lt;1|1</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ls p&lt;&lt;1</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M 200005</span></div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;e[M];</div><div class="line"><span class="keyword">int</span> c[M],fa[M];</div><div class="line"><span class="keyword">int</span> L[M],R[M];</div><div class="line"><span class="keyword">int</span> n,dfn;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></div><div class="line">    <span class="keyword">int</span> u,c,id;</div><div class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> node &amp;a)<span class="keyword">const</span>&#123;</div><div class="line">        <span class="keyword">if</span>(c!=a.c)<span class="keyword">return</span> c&lt;a.c;</div><div class="line">        <span class="keyword">return</span> id&lt;a.id;</div><div class="line">    &#125;</div><div class="line">&#125;a[M];</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TREE</span>&#123;</span></div><div class="line">    <span class="keyword">int</span> l,r;</div><div class="line">    <span class="keyword">int</span> sum,add;</div><div class="line">&#125;tr[M&lt;&lt;<span class="number">2</span>];</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">down</span><span class="params">(<span class="keyword">int</span> p)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(tr[p].add==<span class="number">-1</span>)<span class="keyword">return</span>;</div><div class="line">    <span class="keyword">int</span> l=tr[p].l;</div><div class="line">    <span class="keyword">int</span> r=tr[p].r;</div><div class="line">    <span class="keyword">int</span> md=l+r&gt;&gt;<span class="number">1</span>;</div><div class="line">    tr[ls].sum=tr[p].add*(md-l+<span class="number">1</span>);</div><div class="line">    tr[ls].add=tr[p].add;</div><div class="line">    tr[rs].sum=tr[p].add*(r-md);</div><div class="line">    tr[rs].add=tr[p].add;</div><div class="line">    tr[p].add=<span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> p)</span></span>&#123;</div><div class="line">    tr[p].l=l;</div><div class="line">    tr[p].r=r;</div><div class="line">    tr[p].add=<span class="number">-1</span>;</div><div class="line">    <span class="keyword">if</span>(l==r)&#123;</div><div class="line">        tr[p].sum=<span class="number">1</span>;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> md=l+r&gt;&gt;<span class="number">1</span>;</div><div class="line">    build(l,md,ls);</div><div class="line">    build(md+<span class="number">1</span>,r,rs);</div><div class="line">    tr[p].sum=tr[ls].sum+tr[rs].sum;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> p,<span class="keyword">int</span> v)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(l==tr[p].l&amp;&amp;r==tr[p].r)&#123;</div><div class="line">        tr[p].sum=v*(r-l+<span class="number">1</span>);</div><div class="line">        tr[p].add=v;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    down(p);</div><div class="line">    <span class="keyword">int</span> md=tr[p].l+tr[p].r&gt;&gt;<span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span>(r&lt;=md)update(l,r,ls,v);</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(l&gt;md)update(l,r,rs,v);</div><div class="line">    <span class="keyword">else</span>&#123;</div><div class="line">        update(l,md,ls,v);</div><div class="line">        update(md+<span class="number">1</span>,r,rs,v);</div><div class="line">    &#125;</div><div class="line">    tr[p].sum=tr[ls].sum+tr[rs].sum;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> p)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(l==tr[p].l&amp;&amp;r==tr[p].r)<span class="keyword">return</span> tr[p].sum;</div><div class="line">    down(p);</div><div class="line">    <span class="keyword">int</span> md=tr[p].l+tr[p].r&gt;&gt;<span class="number">1</span>;</div><div class="line">    <span class="keyword">if</span>(r&lt;=md)<span class="keyword">return</span> query(l,r,ls);</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(l&gt;md)<span class="keyword">return</span> query(l,r,rs);</div><div class="line">    <span class="keyword">else</span> <span class="keyword">return</span> query(l,md,ls)+query(md+<span class="number">1</span>,r,rs);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> f)</span></span>&#123;</div><div class="line">    L[u]=dfn;</div><div class="line">    fa[u]=f;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;e[u].size();i++)&#123;</div><div class="line">        <span class="keyword">int</span> v=e[u][i];</div><div class="line">        <span class="keyword">if</span>(v==f)<span class="keyword">continue</span>;</div><div class="line">        dfs(v,u);</div><div class="line">    &#125;</div><div class="line">    R[u]=dfn++;</div><div class="line">    a[u]=(node)&#123;u,c[u],R[u]&#125;;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;c[i]);</div><div class="line">        e[i].clear();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</div><div class="line">        <span class="keyword">int</span> u,v;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;u,&amp;v);</div><div class="line">        e[u].push_back(v);</div><div class="line">        e[v].push_back(u);</div><div class="line">    &#125;</div><div class="line">    dfn=<span class="number">1</span>;</div><div class="line">    dfs(<span class="number">1</span>,<span class="number">0</span>);</div><div class="line">    sort(a+<span class="number">1</span>,a+n+<span class="number">1</span>);</div><div class="line">    build(<span class="number">1</span>,n,<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> cas)</span></span>&#123;</div><div class="line">    ll res=<span class="number">0</span>;</div><div class="line">    Init();</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> C=<span class="number">1</span>,i=<span class="number">1</span>;C&lt;=n;C++)&#123;</div><div class="line">        <span class="keyword">int</span> ii=i;</div><div class="line">        <span class="keyword">for</span>(;i&lt;=n;i++)&#123;</div><div class="line">            <span class="keyword">int</span> CC=a[i].c;</div><div class="line">            <span class="keyword">if</span>(CC!=C)<span class="keyword">break</span>;</div><div class="line">            <span class="keyword">int</span> u=a[i].u;</div><div class="line">            <span class="keyword">int</span> outsz=query(L[<span class="number">1</span>],R[<span class="number">1</span>],<span class="number">1</span>)-query(L[u],R[u],<span class="number">1</span>);</div><div class="line">            <span class="keyword">int</span> sz=<span class="number">1</span>;</div><div class="line">            res+=<span class="number">1l</span>l*outsz*sz;</div><div class="line">            sz+=outsz;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;e[u].size();j++)&#123;</div><div class="line">                <span class="keyword">int</span> v=e[u][j];</div><div class="line">                <span class="keyword">if</span>(v==fa[u])<span class="keyword">continue</span>;</div><div class="line">                <span class="keyword">int</span> nsz=query(L[v],R[v],<span class="number">1</span>);</div><div class="line">                res+=<span class="number">1l</span>l*nsz*sz;</div><div class="line">                sz+=nsz;</div><div class="line">            &#125;</div><div class="line">            update(L[u],R[u],<span class="number">1</span>,<span class="number">0</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span>(;ii&lt;=n;ii++)&#123;</div><div class="line">            <span class="keyword">int</span> CC=a[ii].c;</div><div class="line">            <span class="keyword">if</span>(CC!=C)<span class="keyword">break</span>;</div><div class="line">            <span class="keyword">int</span> u=a[ii].u;</div><div class="line">            update(L[u],R[u],<span class="number">1</span>,<span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"Case #%d: %lld\n"</span>,cas,res);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">int</span> t=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n)==<span class="number">1</span>)solve(++t);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="1008、Hints-of-sd0061"><a href="#1008、Hints-of-sd0061" class="headerlink" title="1008、Hints of sd0061"></a>1008、Hints of sd0061</h2><p>关键字：分块</p>
<p>【分析】</p>
<p>​    说说机房大神的做法。</p>
<p>​    由于我们觉得这个造数的函数所造出来的数感觉上真的比较随机，所以数的分布不是很紧密。那么我们就可以利用分块这一策略快速的查询第k大的数。</p>
<p>​    同时，他告诉我们一个神奇的系统函数nth_element()，作用大概是将一个数组中第k大的数排在第k位，同时左右调整，使一边大于它，一边小于它。据说这个函数的复杂度在最坏的情况下是$O(n)$。</p>
<p>​    标程的核心也是这个函数，不过它将询问排序。因为最坏的情况下b的取值是斐波那契数列，所以就算不分块，最后的复杂度最大也就只有$O(\sum _{i\geq 0}\dfrac {n} {1.618^{i}})\approx(n)$。</p>
<p>【代码】</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(x) cerr&lt;&lt;#x&lt;&lt;<span class="meta-string">" = "</span>&lt;&lt;(x)&lt;&lt;endl</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> us unsigned</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 10000005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> S (1&lt;&lt;16)</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">rd</span><span class="params">(<span class="keyword">int</span> &amp;x)</span></span>&#123;</div><div class="line">    x=<span class="number">0</span>;</div><div class="line">    <span class="keyword">char</span> c;</div><div class="line">    <span class="keyword">while</span>(c=getchar(),c&lt;<span class="number">48</span>);</div><div class="line">    <span class="keyword">do</span> x=x*<span class="number">10</span>+(c^<span class="number">48</span>);</div><div class="line">    <span class="keyword">while</span>(c=getchar(),c&gt;<span class="number">47</span>);</div><div class="line">&#125;</div><div class="line"><span class="keyword">template</span>&lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;<span class="title">void</span> <span class="title">pt</span>(<span class="title">T</span> <span class="title">x</span>)&#123;</span></div><div class="line">    <span class="keyword">if</span>(!x)&#123;</div><div class="line">        <span class="built_in">putchar</span>(<span class="string">'0'</span>);</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">char</span> stk[<span class="number">35</span>];</div><div class="line">    <span class="keyword">int</span> tp=<span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(;x;x/=<span class="number">10</span>)stk[tp++]=x%<span class="number">10</span>^<span class="number">48</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=tp<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)<span class="built_in">putchar</span>(stk[i]);</div><div class="line">&#125;</div><div class="line">us a[S][N/S*<span class="number">3</span>];</div><div class="line"><span class="keyword">int</span> n,m,cas;</div><div class="line"><span class="keyword">int</span> sz[S];</div><div class="line">us x,y,z;</div><div class="line"><span class="function">us <span class="title">rng61</span><span class="params">()</span></span>&#123;</div><div class="line">    us t;</div><div class="line">    x^=x&lt;&lt;<span class="number">16</span>;</div><div class="line">    x^=x&gt;&gt;<span class="number">5</span>;</div><div class="line">    x^=x&lt;&lt;<span class="number">1</span>;</div><div class="line">    t=x;</div><div class="line">    x=y;</div><div class="line">    y=z;</div><div class="line">    z=t^x^y;</div><div class="line">    <span class="keyword">return</span> z;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="built_in">memset</span>(sz,<span class="number">0</span>,<span class="keyword">sizeof</span> sz);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</div><div class="line">        us v=rng61();</div><div class="line">        <span class="keyword">int</span> id=v/S;</div><div class="line">        a[id][sz[id]++]=v;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>,b;i&lt;m;i++)&#123;</div><div class="line">        rd(b);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;;j++)&#123;</div><div class="line">            <span class="keyword">if</span>(b&lt;sz[j])&#123;</div><div class="line">                nth_element(a[j],a[j]+b,a[j]+sz[j]);</div><div class="line">                pt(a[j][b]);</div><div class="line">                <span class="built_in">putchar</span>(<span class="string">" \n"</span>[i==m<span class="number">-1</span>]);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">            b-=sz[j];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">for</span>(;<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;x&gt;&gt;y&gt;&gt;z;)&#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: "</span>,++cas);</div><div class="line">        <span class="keyword">if</span>(!x&amp;&amp;!y&amp;&amp;!z)&#123;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>,b;i&lt;m;i++)&#123;</div><div class="line">                rd(b);</div><div class="line">                <span class="built_in">putchar</span>(<span class="string">'0'</span>);</div><div class="line">                <span class="built_in">putchar</span>(<span class="string">" \n"</span>[i==m<span class="number">-1</span>]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> solve();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="1009、I-Curse-Myself"><a href="#1009、I-Curse-Myself" class="headerlink" title="1009、I Curse Myself"></a>1009、I Curse Myself</h2><p>关键字：图论、优先队列</p>
<p>【分析】</p>
<p>​    首先题目给出的是一个仙人掌图，而对于这样的图来求最小生成树。</p>
<p>​    <strong>抓住仙人掌图与树之间的相同点和不同点。我们发现只需要将每个环都删除到只剩下一条边就好了。</strong></p>
<p>​    如果只考虑两个环，如何算出他们的最小生成树呢？</p>
<p>​    我们先将两个环的边处理出来，将第一个环的所有边和一个指针head=1放在堆里，每次弹出来一个最大的，删除，计算完head+1后放入堆里。每次处理K个，放在新的堆里。</p>
<p>​    重复tot-1次（tot即为环的个数）就能得到前K大的删边，用所有边的权值减去ta，就是前K小的最小生成树了。</p>
<p>​    还有一个问题，如何处理出所有环的所有边。</p>
<p>​    当然直接用tarjan就可以了。其实还有一种写法。只需要先dfs得出一个树，然后往树里面加边。每加一条边，就会形成一个环。又有每个点最多只会在一个环中，所以就算暴力跳LCA将边加入存储环的数组，复杂度也不会很大。</p>
<p>【代码】</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> debug(x) cout&lt;&lt;#x&lt;&lt;<span class="meta-string">" = "</span>&lt;&lt;x&lt;&lt;endl;</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> us unsigned</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> N 100005</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> M 2005</span></div><div class="line"><span class="keyword">const</span> ll mod=(<span class="number">1l</span>l&lt;&lt;<span class="number">32</span>);</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">EE</span>&#123;</span><span class="keyword">int</span> u,v,co;&#125;E[<span class="number">2</span>*M];</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></div><div class="line">    <span class="keyword">int</span> to,id,co;</div><div class="line">&#125;;</div><div class="line"><span class="keyword">int</span> head[M],dep[M],fa[M];</div><div class="line"><span class="keyword">int</span> dis[M][M],b[M][M];</div><div class="line"><span class="keyword">bool</span> mke[M],mk[M];</div><div class="line"><span class="built_in">vector</span>&lt;node&gt;e[M];</div><div class="line"><span class="keyword">int</span> ans[N],an[N];</div><div class="line"><span class="keyword">int</span> n,m,K,cas;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(us &amp;x,us y)</span></span>&#123;</div><div class="line">    x+=y;</div><div class="line">    <span class="keyword">if</span>(x&gt;=mod)x-=mod;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> f,<span class="keyword">int</span> d)</span></span>&#123;</div><div class="line">    dep[u]=d;</div><div class="line">    mk[u]=<span class="number">1</span>;</div><div class="line">    fa[u]=f;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;e[u].size();i++)&#123;</div><div class="line">        <span class="keyword">int</span> v=e[u][i].to;</div><div class="line">        <span class="keyword">int</span> id=e[u][i].id;</div><div class="line">        <span class="keyword">int</span> co=e[u][i].co;</div><div class="line">        <span class="keyword">if</span>(mk[v]||v==f)<span class="keyword">continue</span>;</div><div class="line">        mke[id]=<span class="number">1</span>;</div><div class="line">        dis[u][v]=co;</div><div class="line">        dfs(v,u,d+<span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">QQ</span>&#123;</span></div><div class="line">    <span class="keyword">int</span> v,pos;</div><div class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> QQ &amp;a)<span class="keyword">const</span>&#123;</div><div class="line">        <span class="keyword">return</span> v&lt;a.v;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Heap</span>&#123;</span></div><div class="line">    <span class="keyword">int</span> sz;</div><div class="line">    QQ val[M];</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">clear</span><span class="params">()</span></span>&#123;sz=<span class="number">0</span>;&#125;</div><div class="line">    <span class="function">QQ <span class="title">top</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> val[<span class="number">1</span>];&#125;</div><div class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">empty</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> sz==<span class="number">0</span>;&#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pop</span><span class="params">()</span></span>&#123;</div><div class="line">        QQ v=val[sz--];</div><div class="line">        <span class="keyword">int</span> p=<span class="number">1</span>;</div><div class="line">        <span class="keyword">while</span>((p&lt;&lt;<span class="number">1</span>)&lt;=sz)&#123;</div><div class="line">            <span class="keyword">int</span> l=p&lt;&lt;<span class="number">1</span>,r=p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>;</div><div class="line">            <span class="keyword">if</span>(r&lt;=sz&amp;&amp;val[l]&lt;val[r])l=r;</div><div class="line">            <span class="keyword">if</span>(val[l]&lt;v)<span class="keyword">break</span>;</div><div class="line">            val[p]=val[l];</div><div class="line">            p=l;</div><div class="line">        &#125;</div><div class="line">        val[p]=v;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(QQ v)</span></span>&#123;</div><div class="line">        val[++sz]=v;</div><div class="line">        <span class="keyword">int</span> p=sz;</div><div class="line">        <span class="keyword">while</span>(p&gt;<span class="number">1</span>)&#123;</div><div class="line">            <span class="keyword">int</span> f=p&gt;&gt;<span class="number">1</span>;</div><div class="line">            <span class="keyword">if</span>(v&lt;val[f])<span class="keyword">break</span>;</div><div class="line">            val[p]=val[f];</div><div class="line">            p=f;</div><div class="line">        &#125;</div><div class="line">        val[p]=v;</div><div class="line">    &#125;</div><div class="line">&#125;q;</div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp1</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>&#123;</div><div class="line">    <span class="keyword">return</span> a&gt;b;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">pf</span><span class="params">(ll res)</span></span>&#123;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"Case #%d: %lld\n"</span>,++cas,res);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;m)!=EOF)&#123;</div><div class="line">        <span class="built_in">memset</span>(ans,<span class="number">0</span>,<span class="keyword">sizeof</span> ans);</div><div class="line">        <span class="built_in">memset</span>(mke,<span class="number">0</span>,<span class="keyword">sizeof</span> mke);</div><div class="line">        <span class="built_in">memset</span>(mk,<span class="number">0</span>,<span class="keyword">sizeof</span> mk);</div><div class="line">        ll ans1=<span class="number">0</span>,tot=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)e[i].clear();</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,u,v,co;i&lt;=m;i++)&#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;u,&amp;v,&amp;co);</div><div class="line">            e[u].push_back((node)&#123;v,i,co&#125;);</div><div class="line">            e[v].push_back((node)&#123;u,i,co&#125;);</div><div class="line">            E[i]=(EE)&#123;u,v,co&#125;;</div><div class="line">            ans1+=co;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;K);</div><div class="line">        dfs(<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,u,v;i&lt;=m;i++)&#123;</div><div class="line">            <span class="keyword">if</span>(mke[i])<span class="keyword">continue</span>;</div><div class="line">            u=E[i].u,v=E[i].v;</div><div class="line">            ++tot;</div><div class="line">            b[tot][head[tot]=<span class="number">1</span>]=E[i].co;</div><div class="line">            <span class="keyword">while</span>(u!=v)&#123;</div><div class="line">                <span class="keyword">if</span>(dep[u]&lt;dep[v])swap(u,v);</div><div class="line">                b[tot][++head[tot]]=dis[fa[u]][u];</div><div class="line">                u=fa[u];</div><div class="line">            &#125;</div><div class="line">            sort(b[tot]+<span class="number">1</span>,b[tot]+head[tot]+<span class="number">1</span>,cmp1);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(tot==<span class="number">0</span>)&#123;pf(ans1);<span class="keyword">continue</span>;&#125;</div><div class="line">        <span class="keyword">int</span> cnt=<span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=tot;j++)&#123;</div><div class="line">            <span class="keyword">while</span>(!q.empty())q.pop();</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=head[j];i++)q.push((QQ)&#123;b[j][i]+ans[<span class="number">1</span>],<span class="number">1</span>&#125;);</div><div class="line">            <span class="keyword">int</span> t=<span class="number">0</span>;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;!q.empty()&amp;&amp;i&lt;=K;i++)&#123;</div><div class="line">                QQ top=q.top();</div><div class="line">                q.pop();</div><div class="line">                an[++t]=top.v;</div><div class="line">                <span class="keyword">if</span>(top.pos&lt;cnt)&#123;</div><div class="line">                    q.push((QQ)&#123;top.v-ans[top.pos]+ans[top.pos+<span class="number">1</span>],top.pos+<span class="number">1</span>&#125;);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            cnt=t;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=cnt;i++)ans[i]=an[i];</div><div class="line">        &#125;</div><div class="line">        us res=<span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=cnt;i++)res+=(ans1-ans[i])*i;</div><div class="line">        pf(res);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="1012、Limited-Permutation"><a href="#1012、Limited-Permutation" class="headerlink" title="1012、Limited Permutation"></a>1012、Limited Permutation</h2><p>【分析】</p>
<p>​    这一题比较奇怪，思路是从对样例的模拟中得来的。</p>
<p>​    对于[1,n],如果有解，那么每一次都一定可以找到一个点i,L[i]=1,R[i]=n。那么这个区间就可以被分成[1,i-1]和[i+1,n]。接下来同理。</p>
<p>​    这个结论很显然！然后，这道题就没有了。</p>
<p>​    接下来的问题就是快速寻找是否有满足这个区间的点。普通的做法是快排+lower_bound，高级一点的做法是基排。</p>

                
            
        
        </div>
        
    </article>
    

    
        
    <article class="post">
        <header class="post-header">
            <div class="post-time syuanpi riseIn-light back-1">
                <span>2017年7月29日</span>
            </div>
            <h1 class="post-title syuanpi riseIn-light back-2">
            
                <a href="/2017/07/29/hello-world/">Hello World</a>
            
            </h1>
            
        </header>
        <div class="post-content syuanpi riseIn-light back-3">
            
                
                    <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

                
            
        
        </div>
        
    </article>
    

    
</section>
    
    <nav class="pagination">
        <a class="extend prev" rel="prev" href="/page/2/">< 上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
    </nav>


        </main>
        <footer class="footer syuanpi fadeIn" id="footer">
    <hr>
    <div class="footer-wrapper">
        <div class="left">
            <div class="contact-icon">
    
    
    
    
    
    
    
    
</div>
        </div>
        <div class="right">
            <div class="copyright">
    <div class="info">
        <span>&copy;</span>
        <span>1970 ~ 2017</span>
        <span>❤</span>
        <span>nanhan</span>
    </div>
    <div class="theme">
        <span>
            动力来源于
            <a href="http://hexo.io/" target="_blank">Hexo </a>
        </span>
        <span>
            主题
            <a href="https://github.com/ColMugX/hexo-theme-Nlvi"> Nlvi </a>
        </span>
    </div>
    
    <div class="visit_count">
        <i class="iconfont icon-visit"></i>
        <span id="busuanzi_value_site_uv"></span>
        <i class="iconfont icon-people"></i>
        <span id="busuanzi_value_site_pv"></span>
    </div>
    
</div>
        </div>
    </div>
</footer>
    </div>
    <script src="/script/nlvi.js"></script>

    <script src="/lightbox/js/lightbox.min.js"></script>

<script>
$(document).ready(function(){
    document.body.addEventListener('touchstart', function () {});
    $('.progress').hide();
    $('.body').show();
    Nlvi.tagcloud();
    Nlvi.back2top();
    Nlvi.showToc();
    Nlvi.showComments();
    Nlvi.showReward()

    !CONFIG.animate && Nlvi.offAnimate();
    CONFIG.lightbox && Nlvi.onPicBox();
})
</script>
    </div>
    
    <div class="backtop syuanpi dead toTop" id="backtop">
    <i class="iconfont icon-up"></i>
    <span style="text-align:center;font-family:Georgia;"><span style="font-family:Georgia;" id="scrollpercent">1</span>%</span>
</div>
</body>
</html>
